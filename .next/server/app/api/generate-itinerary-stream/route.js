/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-itinerary-stream/route";
exports.ids = ["app/api/generate-itinerary-stream/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "?4c03":
/*!***********************!*\
  !*** debug (ignored) ***!
  \***********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-itinerary-stream%2Froute&page=%2Fapi%2Fgenerate-itinerary-stream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-itinerary-stream%2Froute.ts&appDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-itinerary-stream%2Froute&page=%2Fapi%2Fgenerate-itinerary-stream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-itinerary-stream%2Froute.ts&appDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ambal_Desktop_trv_code_neyalaAI_src_app_api_generate_itinerary_stream_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/generate-itinerary-stream/route.ts */ \"(rsc)/./src/app/api/generate-itinerary-stream/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-itinerary-stream/route\",\n        pathname: \"/api/generate-itinerary-stream\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-itinerary-stream/route\"\n    },\n    resolvedPagePath: \"/Users/ambal/Desktop/trv/code/neyalaAI/src/app/api/generate-itinerary-stream/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ambal_Desktop_trv_code_neyalaAI_src_app_api_generate_itinerary_stream_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-itinerary-stream/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1pdGluZXJhcnktc3RyZWFtJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1pdGluZXJhcnktc3RyZWFtJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtaXRpbmVyYXJ5LXN0cmVhbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFtYmFsJTJGRGVza3RvcCUyRnRydiUyRmNvZGUlMkZuZXlhbGFBSSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhbWJhbCUyRkRlc2t0b3AlMkZ0cnYlMkZjb2RlJTJGbmV5YWxhQUkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3FDO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV5YWxhLWFpLz9jZjNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hbWJhbC9EZXNrdG9wL3Rydi9jb2RlL25leWFsYUFJL3NyYy9hcHAvYXBpL2dlbmVyYXRlLWl0aW5lcmFyeS1zdHJlYW0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLWl0aW5lcmFyeS1zdHJlYW0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nZW5lcmF0ZS1pdGluZXJhcnktc3RyZWFtXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS1pdGluZXJhcnktc3RyZWFtL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2FtYmFsL0Rlc2t0b3AvdHJ2L2NvZGUvbmV5YWxhQUkvc3JjL2FwcC9hcGkvZ2VuZXJhdGUtaXRpbmVyYXJ5LXN0cmVhbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtaXRpbmVyYXJ5LXN0cmVhbS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-itinerary-stream%2Froute&page=%2Fapi%2Fgenerate-itinerary-stream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-itinerary-stream%2Froute.ts&appDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/generate-itinerary-stream/route.ts":
/*!********************************************************!*\
  !*** ./src/app/api/generate-itinerary-stream/route.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @clerk/nextjs */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/index.js\");\n/* harmony import */ var _lib_unsplash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/unsplash */ \"(rsc)/./src/lib/unsplash.ts\");\n/* harmony import */ var _lib_transportation_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/transportation-icons */ \"(rsc)/./src/lib/transportation-icons.ts\");\n/* harmony import */ var _lib_groq__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/groq */ \"(rsc)/./src/lib/groq.ts\");\n/* harmony import */ var _lib_booking__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/booking */ \"(rsc)/./src/lib/booking.ts\");\n\n\n\n\n\n\nasync function POST(req) {\n    try {\n        const { userId } = await (0,_clerk_nextjs__WEBPACK_IMPORTED_MODULE_5__.auth)();\n        // Allow unauthenticated users for testing, but log it\n        if (!userId) {\n            console.log(\"Warning: Unauthenticated user attempting to generate itinerary\");\n        }\n        const requestData = await req.json();\n        // Create a ReadableStream for real-time updates\n        const stream = new ReadableStream({\n            async start (controller) {\n                try {\n                    // Send initial status\n                    controller.enqueue(new TextEncoder().encode('data: {\"status\": \"started\", \"message\": \"Starting itinerary generation...\"}\\n\\n'));\n                    // Generate itinerary with DeepSeek\n                    controller.enqueue(new TextEncoder().encode('data: {\"status\": \"generating\", \"message\": \"Creating your personalized itinerary...\"}\\n\\n'));\n                    const completion = await (0,_lib_groq__WEBPACK_IMPORTED_MODULE_3__.getGroqChatCompletion)([\n                        {\n                            role: \"system\",\n                            content: `You are an expert travel planner. Create detailed, realistic travel itineraries in JSON format. \n              The response must be valid JSON only - no markdown, no explanations, no extra text.\n              Include specific details like hotel names, activity descriptions, and realistic costs.\n              Use this exact JSON structure:\n              {\n                \"destination\": \"City, Country\",\n                \"dates\": {\"start\": \"YYYY-MM-DD\", \"end\": \"YYYY-MM-DD\"},\n                \"headerImage\": \"URL\",\n                \"overview\": {\"history\": \"text\", \"culture\": \"text\"},\n                \"airport\": {\"name\": \"Airport Name\", \"image\": \"URL\", \"info\": \"text\"},\n                \"hotels\": [{\"name\": \"Hotel Name\", \"image\": \"URL\", \"rating\": 4.5, \"price\": 150, \"link\": \"URL\", \"location\": {\"lat\": 0, \"lng\": 0}}],\n                \"activities\": [{\"name\": \"Activity\", \"description\": \"text\", \"image\": \"URL\", \"day\": 1, \"time\": \"09:00\", \"location\": {\"lat\": 0, \"lng\": 0}}],\n                \"transportation\": [{\"type\": \"Metro\", \"description\": \"text\", \"icon\": \"URL\"}],\n                \"estimatedCost\": {\"accommodation\": 500, \"activities\": 300, \"transportation\": 100, \"food\": 200, \"total\": 1100}\n              }`\n                        },\n                        {\n                            role: \"user\",\n                            content: `Create a detailed travel itinerary for ${requestData.destination} from ${requestData.startDate} to ${requestData.endDate} for ${requestData.travelGroup}.\n              ${requestData.requirements?.length ? `Requirements: ${requestData.requirements.join(\", \")}` : \"\"}\n              ${requestData.budget ? `Budget: ${requestData.budget}` : \"\"}\n              ${requestData.travelStyle ? `Travel Style: ${requestData.travelStyle}` : \"\"}\n              ${requestData.activities?.length ? `Preferred Activities: ${requestData.activities.join(\", \")}` : \"\"}\n              \n              Respond with ONLY valid JSON.`\n                        }\n                    ]);\n                    if (!completion.choices[0]?.message?.content) {\n                        throw new Error(\"No content received from DeepSeek API\");\n                    }\n                    let itineraryData;\n                    try {\n                        itineraryData = JSON.parse(completion.choices[0].message.content);\n                    } catch (parseError) {\n                        throw new Error(\"Failed to parse itinerary data from DeepSeek\");\n                    }\n                    // Send status update\n                    controller.enqueue(new TextEncoder().encode('data: {\"status\": \"processing\", \"message\": \"Enhancing with high-quality images...\"}\\n\\n'));\n                    // Parallel image fetching for speed\n                    const [headerImage, airportImage] = await Promise.all([\n                        (0,_lib_unsplash__WEBPACK_IMPORTED_MODULE_1__.getDestinationHeaderImage)(itineraryData.destination),\n                        (0,_lib_unsplash__WEBPACK_IMPORTED_MODULE_1__.getAirportImage)(itineraryData.airport.name)\n                    ]);\n                    itineraryData.headerImage = headerImage;\n                    itineraryData.airport.image = airportImage;\n                    // Process hotels with real booking data\n                    const hotelSearchParams = {\n                        location: requestData.destination,\n                        checkIn: requestData.startDate,\n                        checkOut: requestData.endDate,\n                        adults: 1,\n                        rooms: 1\n                    };\n                    const realHotels = await (0,_lib_booking__WEBPACK_IMPORTED_MODULE_4__.searchHotels)(hotelSearchParams);\n                    // Always use real hotels if available, otherwise create a fallback\n                    if (realHotels.length > 0) {\n                        console.log(\"Using real hotels from RapidAPI:\", realHotels.length);\n                        itineraryData.hotels = realHotels;\n                    } else {\n                        console.log(\"No real hotels found, creating fallback hotels\");\n                        // Create fallback hotels with better variety\n                        itineraryData.hotels = [\n                            {\n                                id: \"fallback_1\",\n                                name: `Premium Hotel in ${itineraryData.destination}`,\n                                image: await (0,_lib_booking__WEBPACK_IMPORTED_MODULE_4__.getHotelImage)(`Premium Hotel ${itineraryData.destination}`, itineraryData.destination),\n                                rating: 4.5,\n                                price: 180,\n                                currency: \"USD\",\n                                stars: 4,\n                                location: {\n                                    lat: 0,\n                                    lng: 0\n                                },\n                                amenities: [\n                                    \"WiFi\",\n                                    \"Spa\",\n                                    \"Restaurant\",\n                                    \"Pool\"\n                                ],\n                                description: `Luxury accommodation in ${itineraryData.destination}`,\n                                bookingUrl: `https://www.booking.com/searchresults.html?ss=${encodeURIComponent(`Premium Hotel ${itineraryData.destination}`)}&aid=1234567&utm_source=neyalaAI&utm_medium=travel_planner&selected_currency=USD&nflt=review_score%3D80`\n                            },\n                            {\n                                id: \"fallback_2\",\n                                name: `Comfort Inn ${itineraryData.destination}`,\n                                image: await (0,_lib_booking__WEBPACK_IMPORTED_MODULE_4__.getHotelImage)(`Comfort Inn ${itineraryData.destination}`, itineraryData.destination),\n                                rating: 4.2,\n                                price: 120,\n                                currency: \"USD\",\n                                stars: 3,\n                                location: {\n                                    lat: 0,\n                                    lng: 0\n                                },\n                                amenities: [\n                                    \"WiFi\",\n                                    \"Breakfast\",\n                                    \"Parking\"\n                                ],\n                                description: `Comfortable mid-range hotel in ${itineraryData.destination}`,\n                                bookingUrl: `https://www.booking.com/searchresults.html?ss=${encodeURIComponent(`Comfort Inn ${itineraryData.destination}`)}&aid=1234567&utm_source=neyalaAI&utm_medium=travel_planner&selected_currency=USD&nflt=review_score%3D80`\n                            },\n                            {\n                                id: \"fallback_3\",\n                                name: `Budget Hostel ${itineraryData.destination}`,\n                                image: await (0,_lib_booking__WEBPACK_IMPORTED_MODULE_4__.getHotelImage)(`Hostel ${itineraryData.destination}`, itineraryData.destination),\n                                rating: 3.8,\n                                price: 45,\n                                currency: \"USD\",\n                                stars: 2,\n                                location: {\n                                    lat: 0,\n                                    lng: 0\n                                },\n                                amenities: [\n                                    \"WiFi\",\n                                    \"Kitchen\",\n                                    \"Common Room\"\n                                ],\n                                description: `Affordable hostel accommodation in ${itineraryData.destination}`,\n                                bookingUrl: `https://www.booking.com/searchresults.html?ss=${encodeURIComponent(`Hostel ${itineraryData.destination}`)}&aid=1234567&utm_source=neyalaAI&utm_medium=travel_planner&selected_currency=USD&nflt=review_score%3D80`\n                            }\n                        ];\n                    }\n                    if (itineraryData.activities && Array.isArray(itineraryData.activities)) {\n                        const activityPromises = itineraryData.activities.map(async (activity)=>{\n                            activity.image = await (0,_lib_unsplash__WEBPACK_IMPORTED_MODULE_1__.getActivityImage)(activity.name);\n                            return activity;\n                        });\n                        await Promise.all(activityPromises);\n                    }\n                    // Process transportation icons\n                    if (itineraryData.transportation && Array.isArray(itineraryData.transportation)) {\n                        for (const transport of itineraryData.transportation){\n                            const iconData = (0,_lib_transportation_icons__WEBPACK_IMPORTED_MODULE_2__.getTransportationIcon)(transport.type);\n                            transport.icon = iconData.icon;\n                            transport.type = iconData.name;\n                        }\n                    }\n                    // Add eSIM section\n                    itineraryData.eSIM = {\n                        provider: \"Airalo\",\n                        description: \"Get a global eSIM for seamless connectivity during your trip\",\n                        link: (0,_lib_unsplash__WEBPACK_IMPORTED_MODULE_1__.generateESIMLink)(itineraryData.destination),\n                        price: \"$5-15\"\n                    };\n                    // Send final result\n                    controller.enqueue(new TextEncoder().encode(`data: {\"status\": \"completed\", \"data\": ${JSON.stringify(itineraryData)}}\\n\\n`));\n                    controller.close();\n                } catch (error) {\n                    controller.enqueue(new TextEncoder().encode(`data: {\"status\": \"error\", \"error\": \"${error.message}\"}\\n\\n`));\n                    controller.close();\n                }\n            }\n        });\n        return new Response(stream, {\n            headers: {\n                \"Content-Type\": \"text/event-stream\",\n                \"Cache-Control\": \"no-cache\",\n                \"Connection\": \"keep-alive\"\n            }\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9nZW5lcmF0ZS1pdGluZXJhcnktc3RyZWFtL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMkM7QUFDTjtBQUMyRTtBQUM3QztBQUNoQjtBQUNTO0FBYXJELGVBQWVVLEtBQUtDLEdBQVk7SUFDckMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUcsTUFBTVgsbURBQUlBO1FBQzdCLHNEQUFzRDtRQUN0RCxJQUFJLENBQUNXLFFBQVE7WUFDWEMsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQSxNQUFNQyxjQUFnQyxNQUFNSixJQUFJSyxJQUFJO1FBRXBELGdEQUFnRDtRQUNoRCxNQUFNQyxTQUFTLElBQUlDLGVBQWU7WUFDaEMsTUFBTUMsT0FBTUMsVUFBVTtnQkFDcEIsSUFBSTtvQkFDRixzQkFBc0I7b0JBQ3RCQSxXQUFXQyxPQUFPLENBQUMsSUFBSUMsY0FBY0MsTUFBTSxDQUFDO29CQUU1QyxtQ0FBbUM7b0JBQ25DSCxXQUFXQyxPQUFPLENBQUMsSUFBSUMsY0FBY0MsTUFBTSxDQUFDO29CQUU1QyxNQUFNQyxhQUFhLE1BQU1qQixnRUFBcUJBLENBQUM7d0JBQzdDOzRCQUNFa0IsTUFBTTs0QkFDTkMsU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7OztlQWNULENBQUM7d0JBQ0o7d0JBQ0E7NEJBQ0VELE1BQU07NEJBQ05DLFNBQVMsQ0FBQyx1Q0FBdUMsRUFBRVgsWUFBWVksV0FBVyxDQUFDLE1BQU0sRUFBRVosWUFBWWEsU0FBUyxDQUFDLElBQUksRUFBRWIsWUFBWWMsT0FBTyxDQUFDLEtBQUssRUFBRWQsWUFBWWUsV0FBVyxDQUFDO2NBQ2xLLEVBQUVmLFlBQVlnQixZQUFZLEVBQUVDLFNBQVMsQ0FBQyxjQUFjLEVBQUVqQixZQUFZZ0IsWUFBWSxDQUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRztjQUNqRyxFQUFFbEIsWUFBWW1CLE1BQU0sR0FBRyxDQUFDLFFBQVEsRUFBRW5CLFlB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QUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV5YWxhLWFpLy4vc3JjL2FwcC9hcGkvZ2VuZXJhdGUtaXRpbmVyYXJ5LXN0cmVhbS9yb3V0ZS50cz83NmRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGF1dGggfSBmcm9tICdAY2xlcmsvbmV4dGpzJztcbmltcG9ydCB7IGdldERlc3RpbmF0aW9uSGVhZGVySW1hZ2UsIGdldEFpcnBvcnRJbWFnZSwgZ2V0QWN0aXZpdHlJbWFnZSwgZ2VuZXJhdGVFU0lNTGluayB9IGZyb20gJ0AvbGliL3Vuc3BsYXNoJztcbmltcG9ydCB7IGdldFRyYW5zcG9ydGF0aW9uSWNvbiB9IGZyb20gJ0AvbGliL3RyYW5zcG9ydGF0aW9uLWljb25zJztcbmltcG9ydCB7IGdldEdyb3FDaGF0Q29tcGxldGlvbiB9IGZyb20gJ0AvbGliL2dyb3EnO1xuaW1wb3J0IHsgc2VhcmNoSG90ZWxzLCBnZXRIb3RlbEltYWdlIH0gZnJvbSAnQC9saWIvYm9va2luZyc7XG5cbmludGVyZmFjZSBJdGluZXJhcnlSZXF1ZXN0IHtcbiAgZGVzdGluYXRpb246IHN0cmluZztcbiAgc3RhcnREYXRlOiBzdHJpbmc7XG4gIGVuZERhdGU6IHN0cmluZztcbiAgdHJhdmVsR3JvdXA6IHN0cmluZztcbiAgcmVxdWlyZW1lbnRzPzogc3RyaW5nW107XG4gIGJ1ZGdldD86IHN0cmluZztcbiAgdHJhdmVsU3R5bGU/OiBzdHJpbmc7XG4gIGFjdGl2aXRpZXM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IGF3YWl0IGF1dGgoKTtcbiAgICAvLyBBbGxvdyB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMgZm9yIHRlc3RpbmcsIGJ1dCBsb2cgaXRcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgY29uc29sZS5sb2coJ1dhcm5pbmc6IFVuYXV0aGVudGljYXRlZCB1c2VyIGF0dGVtcHRpbmcgdG8gZ2VuZXJhdGUgaXRpbmVyYXJ5Jyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdERhdGE6IEl0aW5lcmFyeVJlcXVlc3QgPSBhd2FpdCByZXEuanNvbigpO1xuXG4gICAgLy8gQ3JlYXRlIGEgUmVhZGFibGVTdHJlYW0gZm9yIHJlYWwtdGltZSB1cGRhdGVzXG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgIGFzeW5jIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBTZW5kIGluaXRpYWwgc3RhdHVzXG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSgnZGF0YToge1wic3RhdHVzXCI6IFwic3RhcnRlZFwiLCBcIm1lc3NhZ2VcIjogXCJTdGFydGluZyBpdGluZXJhcnkgZ2VuZXJhdGlvbi4uLlwifVxcblxcbicpKTtcblxuICAgICAgICAgIC8vIEdlbmVyYXRlIGl0aW5lcmFyeSB3aXRoIERlZXBTZWVrXG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSgnZGF0YToge1wic3RhdHVzXCI6IFwiZ2VuZXJhdGluZ1wiLCBcIm1lc3NhZ2VcIjogXCJDcmVhdGluZyB5b3VyIHBlcnNvbmFsaXplZCBpdGluZXJhcnkuLi5cIn1cXG5cXG4nKSk7XG5cbiAgICAgICAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgZ2V0R3JvcUNoYXRDb21wbGV0aW9uKFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcm9sZTogXCJzeXN0ZW1cIixcbiAgICAgICAgICAgICAgY29udGVudDogYFlvdSBhcmUgYW4gZXhwZXJ0IHRyYXZlbCBwbGFubmVyLiBDcmVhdGUgZGV0YWlsZWQsIHJlYWxpc3RpYyB0cmF2ZWwgaXRpbmVyYXJpZXMgaW4gSlNPTiBmb3JtYXQuIFxuICAgICAgICAgICAgICBUaGUgcmVzcG9uc2UgbXVzdCBiZSB2YWxpZCBKU09OIG9ubHkgLSBubyBtYXJrZG93biwgbm8gZXhwbGFuYXRpb25zLCBubyBleHRyYSB0ZXh0LlxuICAgICAgICAgICAgICBJbmNsdWRlIHNwZWNpZmljIGRldGFpbHMgbGlrZSBob3RlbCBuYW1lcywgYWN0aXZpdHkgZGVzY3JpcHRpb25zLCBhbmQgcmVhbGlzdGljIGNvc3RzLlxuICAgICAgICAgICAgICBVc2UgdGhpcyBleGFjdCBKU09OIHN0cnVjdHVyZTpcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZGVzdGluYXRpb25cIjogXCJDaXR5LCBDb3VudHJ5XCIsXG4gICAgICAgICAgICAgICAgXCJkYXRlc1wiOiB7XCJzdGFydFwiOiBcIllZWVktTU0tRERcIiwgXCJlbmRcIjogXCJZWVlZLU1NLUREXCJ9LFxuICAgICAgICAgICAgICAgIFwiaGVhZGVySW1hZ2VcIjogXCJVUkxcIixcbiAgICAgICAgICAgICAgICBcIm92ZXJ2aWV3XCI6IHtcImhpc3RvcnlcIjogXCJ0ZXh0XCIsIFwiY3VsdHVyZVwiOiBcInRleHRcIn0sXG4gICAgICAgICAgICAgICAgXCJhaXJwb3J0XCI6IHtcIm5hbWVcIjogXCJBaXJwb3J0IE5hbWVcIiwgXCJpbWFnZVwiOiBcIlVSTFwiLCBcImluZm9cIjogXCJ0ZXh0XCJ9LFxuICAgICAgICAgICAgICAgIFwiaG90ZWxzXCI6IFt7XCJuYW1lXCI6IFwiSG90ZWwgTmFtZVwiLCBcImltYWdlXCI6IFwiVVJMXCIsIFwicmF0aW5nXCI6IDQuNSwgXCJwcmljZVwiOiAxNTAsIFwibGlua1wiOiBcIlVSTFwiLCBcImxvY2F0aW9uXCI6IHtcImxhdFwiOiAwLCBcImxuZ1wiOiAwfX1dLFxuICAgICAgICAgICAgICAgIFwiYWN0aXZpdGllc1wiOiBbe1wibmFtZVwiOiBcIkFjdGl2aXR5XCIsIFwiZGVzY3JpcHRpb25cIjogXCJ0ZXh0XCIsIFwiaW1hZ2VcIjogXCJVUkxcIiwgXCJkYXlcIjogMSwgXCJ0aW1lXCI6IFwiMDk6MDBcIiwgXCJsb2NhdGlvblwiOiB7XCJsYXRcIjogMCwgXCJsbmdcIjogMH19XSxcbiAgICAgICAgICAgICAgICBcInRyYW5zcG9ydGF0aW9uXCI6IFt7XCJ0eXBlXCI6IFwiTWV0cm9cIiwgXCJkZXNjcmlwdGlvblwiOiBcInRleHRcIiwgXCJpY29uXCI6IFwiVVJMXCJ9XSxcbiAgICAgICAgICAgICAgICBcImVzdGltYXRlZENvc3RcIjoge1wiYWNjb21tb2RhdGlvblwiOiA1MDAsIFwiYWN0aXZpdGllc1wiOiAzMDAsIFwidHJhbnNwb3J0YXRpb25cIjogMTAwLCBcImZvb2RcIjogMjAwLCBcInRvdGFsXCI6IDExMDB9XG4gICAgICAgICAgICAgIH1gXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgICAgY29udGVudDogYENyZWF0ZSBhIGRldGFpbGVkIHRyYXZlbCBpdGluZXJhcnkgZm9yICR7cmVxdWVzdERhdGEuZGVzdGluYXRpb259IGZyb20gJHtyZXF1ZXN0RGF0YS5zdGFydERhdGV9IHRvICR7cmVxdWVzdERhdGEuZW5kRGF0ZX0gZm9yICR7cmVxdWVzdERhdGEudHJhdmVsR3JvdXB9LlxuICAgICAgICAgICAgICAke3JlcXVlc3REYXRhLnJlcXVpcmVtZW50cz8ubGVuZ3RoID8gYFJlcXVpcmVtZW50czogJHtyZXF1ZXN0RGF0YS5yZXF1aXJlbWVudHMuam9pbignLCAnKX1gIDogJyd9XG4gICAgICAgICAgICAgICR7cmVxdWVzdERhdGEuYnVkZ2V0ID8gYEJ1ZGdldDogJHtyZXF1ZXN0RGF0YS5idWRnZXR9YCA6ICcnfVxuICAgICAgICAgICAgICAke3JlcXVlc3REYXRhLnRyYXZlbFN0eWxlID8gYFRyYXZlbCBTdHlsZTogJHtyZXF1ZXN0RGF0YS50cmF2ZWxTdHlsZX1gIDogJyd9XG4gICAgICAgICAgICAgICR7cmVxdWVzdERhdGEuYWN0aXZpdGllcz8ubGVuZ3RoID8gYFByZWZlcnJlZCBBY3Rpdml0aWVzOiAke3JlcXVlc3REYXRhLmFjdGl2aXRpZXMuam9pbignLCAnKX1gIDogJyd9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBSZXNwb25kIHdpdGggT05MWSB2YWxpZCBKU09OLmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdKTtcblxuICAgICAgICAgIGlmICghY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbnRlbnQgcmVjZWl2ZWQgZnJvbSBEZWVwU2VlayBBUEknKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgaXRpbmVyYXJ5RGF0YTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaXRpbmVyYXJ5RGF0YSA9IEpTT04ucGFyc2UoY29tcGxldGlvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgaXRpbmVyYXJ5IGRhdGEgZnJvbSBEZWVwU2VlaycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNlbmQgc3RhdHVzIHVwZGF0ZVxuICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoJ2RhdGE6IHtcInN0YXR1c1wiOiBcInByb2Nlc3NpbmdcIiwgXCJtZXNzYWdlXCI6IFwiRW5oYW5jaW5nIHdpdGggaGlnaC1xdWFsaXR5IGltYWdlcy4uLlwifVxcblxcbicpKTtcblxuICAgICAgICAgIC8vIFBhcmFsbGVsIGltYWdlIGZldGNoaW5nIGZvciBzcGVlZFxuICAgICAgICAgIGNvbnN0IFtoZWFkZXJJbWFnZSwgYWlycG9ydEltYWdlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIGdldERlc3RpbmF0aW9uSGVhZGVySW1hZ2UoaXRpbmVyYXJ5RGF0YS5kZXN0aW5hdGlvbiksXG4gICAgICAgICAgICBnZXRBaXJwb3J0SW1hZ2UoaXRpbmVyYXJ5RGF0YS5haXJwb3J0Lm5hbWUpXG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICBpdGluZXJhcnlEYXRhLmhlYWRlckltYWdlID0gaGVhZGVySW1hZ2U7XG4gICAgICAgICAgaXRpbmVyYXJ5RGF0YS5haXJwb3J0LmltYWdlID0gYWlycG9ydEltYWdlO1xuXG4gICAgICAgICAgLy8gUHJvY2VzcyBob3RlbHMgd2l0aCByZWFsIGJvb2tpbmcgZGF0YVxuICAgICAgICAgIGNvbnN0IGhvdGVsU2VhcmNoUGFyYW1zID0ge1xuICAgICAgICAgICAgbG9jYXRpb246IHJlcXVlc3REYXRhLmRlc3RpbmF0aW9uLFxuICAgICAgICAgICAgY2hlY2tJbjogcmVxdWVzdERhdGEuc3RhcnREYXRlLFxuICAgICAgICAgICAgY2hlY2tPdXQ6IHJlcXVlc3REYXRhLmVuZERhdGUsXG4gICAgICAgICAgICBhZHVsdHM6IDEsXG4gICAgICAgICAgICByb29tczogMVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCByZWFsSG90ZWxzID0gYXdhaXQgc2VhcmNoSG90ZWxzKGhvdGVsU2VhcmNoUGFyYW1zKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbHdheXMgdXNlIHJlYWwgaG90ZWxzIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGNyZWF0ZSBhIGZhbGxiYWNrXG4gICAgICAgICAgaWYgKHJlYWxIb3RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIHJlYWwgaG90ZWxzIGZyb20gUmFwaWRBUEk6JywgcmVhbEhvdGVscy5sZW5ndGgpO1xuICAgICAgICAgICAgaXRpbmVyYXJ5RGF0YS5ob3RlbHMgPSByZWFsSG90ZWxzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gcmVhbCBob3RlbHMgZm91bmQsIGNyZWF0aW5nIGZhbGxiYWNrIGhvdGVscycpO1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGZhbGxiYWNrIGhvdGVscyB3aXRoIGJldHRlciB2YXJpZXR5XG4gICAgICAgICAgICBpdGluZXJhcnlEYXRhLmhvdGVscyA9IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAnZmFsbGJhY2tfMScsXG4gICAgICAgICAgICAgICAgbmFtZTogYFByZW1pdW0gSG90ZWwgaW4gJHtpdGluZXJhcnlEYXRhLmRlc3RpbmF0aW9ufWAsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGF3YWl0IGdldEhvdGVsSW1hZ2UoYFByZW1pdW0gSG90ZWwgJHtpdGluZXJhcnlEYXRhLmRlc3RpbmF0aW9ufWAsIGl0aW5lcmFyeURhdGEuZGVzdGluYXRpb24pLFxuICAgICAgICAgICAgICAgIHJhdGluZzogNC41LFxuICAgICAgICAgICAgICAgIHByaWNlOiAxODAsXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxuICAgICAgICAgICAgICAgIHN0YXJzOiA0LFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgICAgICAgICAgYW1lbml0aWVzOiBbJ1dpRmknLCAnU3BhJywgJ1Jlc3RhdXJhbnQnLCAnUG9vbCddLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgTHV4dXJ5IGFjY29tbW9kYXRpb24gaW4gJHtpdGluZXJhcnlEYXRhLmRlc3RpbmF0aW9ufWAsXG4gICAgICAgICAgICAgICAgYm9va2luZ1VybDogYGh0dHBzOi8vd3d3LmJvb2tpbmcuY29tL3NlYXJjaHJlc3VsdHMuaHRtbD9zcz0ke2VuY29kZVVSSUNvbXBvbmVudChgUHJlbWl1bSBIb3RlbCAke2l0aW5lcmFyeURhdGEuZGVzdGluYXRpb259YCl9JmFpZD0xMjM0NTY3JnV0bV9zb3VyY2U9bmV5YWxhQUkmdXRtX21lZGl1bT10cmF2ZWxfcGxhbm5lciZzZWxlY3RlZF9jdXJyZW5jeT1VU0QmbmZsdD1yZXZpZXdfc2NvcmUlM0Q4MGBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAnZmFsbGJhY2tfMicsXG4gICAgICAgICAgICAgICAgbmFtZTogYENvbWZvcnQgSW5uICR7aXRpbmVyYXJ5RGF0YS5kZXN0aW5hdGlvbn1gLFxuICAgICAgICAgICAgICAgIGltYWdlOiBhd2FpdCBnZXRIb3RlbEltYWdlKGBDb21mb3J0IElubiAke2l0aW5lcmFyeURhdGEuZGVzdGluYXRpb259YCwgaXRpbmVyYXJ5RGF0YS5kZXN0aW5hdGlvbiksXG4gICAgICAgICAgICAgICAgcmF0aW5nOiA0LjIsXG4gICAgICAgICAgICAgICAgcHJpY2U6IDEyMCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogJ1VTRCcsXG4gICAgICAgICAgICAgICAgc3RhcnM6IDMsXG4gICAgICAgICAgICAgICAgbG9jYXRpb246IHsgbGF0OiAwLCBsbmc6IDAgfSxcbiAgICAgICAgICAgICAgICBhbWVuaXRpZXM6IFsnV2lGaScsICdCcmVha2Zhc3QnLCAnUGFya2luZyddLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgQ29tZm9ydGFibGUgbWlkLXJhbmdlIGhvdGVsIGluICR7aXRpbmVyYXJ5RGF0YS5kZXN0aW5hdGlvbn1gLFxuICAgICAgICAgICAgICAgIGJvb2tpbmdVcmw6IGBodHRwczovL3d3dy5ib29raW5nLmNvbS9zZWFyY2hyZXN1bHRzLmh0bWw/c3M9JHtlbmNvZGVVUklDb21wb25lbnQoYENvbWZvcnQgSW5uICR7aXRpbmVyYXJ5RGF0YS5kZXN0aW5hdGlvbn1gKX0mYWlkPTEyMzQ1NjcmdXRtX3NvdXJjZT1uZXlhbGFBSSZ1dG1fbWVkaXVtPXRyYXZlbF9wbGFubmVyJnNlbGVjdGVkX2N1cnJlbmN5PVVTRCZuZmx0PXJldmlld19zY29yZSUzRDgwYFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICdmYWxsYmFja18zJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBgQnVkZ2V0IEhvc3RlbCAke2l0aW5lcmFyeURhdGEuZGVzdGluYXRpb259YCxcbiAgICAgICAgICAgICAgICBpbWFnZTogYXdhaXQgZ2V0SG90ZWxJbWFnZShgSG9zdGVsICR7aXRpbmVyYXJ5RGF0YS5kZXN0aW5hdGlvbn1gLCBpdGluZXJhcnlEYXRhLmRlc3RpbmF0aW9uKSxcbiAgICAgICAgICAgICAgICByYXRpbmc6IDMuOCxcbiAgICAgICAgICAgICAgICBwcmljZTogNDUsXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6ICdVU0QnLFxuICAgICAgICAgICAgICAgIHN0YXJzOiAyLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB7IGxhdDogMCwgbG5nOiAwIH0sXG4gICAgICAgICAgICAgICAgYW1lbml0aWVzOiBbJ1dpRmknLCAnS2l0Y2hlbicsICdDb21tb24gUm9vbSddLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgQWZmb3JkYWJsZSBob3N0ZWwgYWNjb21tb2RhdGlvbiBpbiAke2l0aW5lcmFyeURhdGEuZGVzdGluYXRpb259YCxcbiAgICAgICAgICAgICAgICBib29raW5nVXJsOiBgaHR0cHM6Ly93d3cuYm9va2luZy5jb20vc2VhcmNocmVzdWx0cy5odG1sP3NzPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGBIb3N0ZWwgJHtpdGluZXJhcnlEYXRhLmRlc3RpbmF0aW9ufWApfSZhaWQ9MTIzNDU2NyZ1dG1fc291cmNlPW5leWFsYUFJJnV0bV9tZWRpdW09dHJhdmVsX3BsYW5uZXImc2VsZWN0ZWRfY3VycmVuY3k9VVNEJm5mbHQ9cmV2aWV3X3Njb3JlJTNEODBgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGl0aW5lcmFyeURhdGEuYWN0aXZpdGllcyAmJiBBcnJheS5pc0FycmF5KGl0aW5lcmFyeURhdGEuYWN0aXZpdGllcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2aXR5UHJvbWlzZXMgPSBpdGluZXJhcnlEYXRhLmFjdGl2aXRpZXMubWFwKGFzeW5jIChhY3Rpdml0eTogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGFjdGl2aXR5LmltYWdlID0gYXdhaXQgZ2V0QWN0aXZpdHlJbWFnZShhY3Rpdml0eS5uYW1lKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGFjdGl2aXR5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhY3Rpdml0eVByb21pc2VzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBQcm9jZXNzIHRyYW5zcG9ydGF0aW9uIGljb25zXG4gICAgICAgICAgaWYgKGl0aW5lcmFyeURhdGEudHJhbnNwb3J0YXRpb24gJiYgQXJyYXkuaXNBcnJheShpdGluZXJhcnlEYXRhLnRyYW5zcG9ydGF0aW9uKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFuc3BvcnQgb2YgaXRpbmVyYXJ5RGF0YS50cmFuc3BvcnRhdGlvbikge1xuICAgICAgICAgICAgICBjb25zdCBpY29uRGF0YSA9IGdldFRyYW5zcG9ydGF0aW9uSWNvbih0cmFuc3BvcnQudHlwZSk7XG4gICAgICAgICAgICAgIHRyYW5zcG9ydC5pY29uID0gaWNvbkRhdGEuaWNvbjtcbiAgICAgICAgICAgICAgdHJhbnNwb3J0LnR5cGUgPSBpY29uRGF0YS5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFkZCBlU0lNIHNlY3Rpb25cbiAgICAgICAgICBpdGluZXJhcnlEYXRhLmVTSU0gPSB7XG4gICAgICAgICAgICBwcm92aWRlcjogXCJBaXJhbG9cIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkdldCBhIGdsb2JhbCBlU0lNIGZvciBzZWFtbGVzcyBjb25uZWN0aXZpdHkgZHVyaW5nIHlvdXIgdHJpcFwiLFxuICAgICAgICAgICAgbGluazogZ2VuZXJhdGVFU0lNTGluayhpdGluZXJhcnlEYXRhLmRlc3RpbmF0aW9uKSxcbiAgICAgICAgICAgIHByaWNlOiBcIiQ1LTE1XCJcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gU2VuZCBmaW5hbCByZXN1bHRcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGBkYXRhOiB7XCJzdGF0dXNcIjogXCJjb21wbGV0ZWRcIiwgXCJkYXRhXCI6ICR7SlNPTi5zdHJpbmdpZnkoaXRpbmVyYXJ5RGF0YSl9fVxcblxcbmApKTtcbiAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYGRhdGE6IHtcInN0YXR1c1wiOiBcImVycm9yXCIsIFwiZXJyb3JcIjogXCIke2Vycm9yLm1lc3NhZ2V9XCJ9XFxuXFxuYCkpO1xuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShzdHJlYW0sIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2V2ZW50LXN0cmVhbScsXG4gICAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0ludGVybmFsIHNlcnZlciBlcnJvcidcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhdXRoIiwiZ2V0RGVzdGluYXRpb25IZWFkZXJJbWFnZSIsImdldEFpcnBvcnRJbWFnZSIsImdldEFjdGl2aXR5SW1hZ2UiLCJnZW5lcmF0ZUVTSU1MaW5rIiwiZ2V0VHJhbnNwb3J0YXRpb25JY29uIiwiZ2V0R3JvcUNoYXRDb21wbGV0aW9uIiwic2VhcmNoSG90ZWxzIiwiZ2V0SG90ZWxJbWFnZSIsIlBPU1QiLCJyZXEiLCJ1c2VySWQiLCJjb25zb2xlIiwibG9nIiwicmVxdWVzdERhdGEiLCJqc29uIiwic3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJlbnF1ZXVlIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJjb21wbGV0aW9uIiwicm9sZSIsImNvbnRlbnQiLCJkZXN0aW5hdGlvbiIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJ0cmF2ZWxHcm91cCIsInJlcXVpcmVtZW50cyIsImxlbmd0aCIsImpvaW4iLCJidWRnZXQiLCJ0cmF2ZWxTdHlsZSIsImFjdGl2aXRpZXMiLCJjaG9pY2VzIiwibWVzc2FnZSIsIkVycm9yIiwiaXRpbmVyYXJ5RGF0YSIsIkpTT04iLCJwYXJzZSIsInBhcnNlRXJyb3IiLCJoZWFkZXJJbWFnZSIsImFpcnBvcnRJbWFnZSIsIlByb21pc2UiLCJhbGwiLCJhaXJwb3J0IiwibmFtZSIsImltYWdlIiwiaG90ZWxTZWFyY2hQYXJhbXMiLCJsb2NhdGlvbiIsImNoZWNrSW4iLCJjaGVja091dCIsImFkdWx0cyIsInJvb21zIiwicmVhbEhvdGVscyIsImhvdGVscyIsImlkIiwicmF0aW5nIiwicHJpY2UiLCJjdXJyZW5jeSIsInN0YXJzIiwibGF0IiwibG5nIiwiYW1lbml0aWVzIiwiZGVzY3JpcHRpb24iLCJib29raW5nVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiQXJyYXkiLCJpc0FycmF5IiwiYWN0aXZpdHlQcm9taXNlcyIsIm1hcCIsImFjdGl2aXR5IiwidHJhbnNwb3J0YXRpb24iLCJ0cmFuc3BvcnQiLCJpY29uRGF0YSIsInR5cGUiLCJpY29uIiwiZVNJTSIsInByb3ZpZGVyIiwibGluayIsInN0cmluZ2lmeSIsImNsb3NlIiwiZXJyb3IiLCJSZXNwb25zZSIsImhlYWRlcnMiLCJzdWNjZXNzIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/generate-itinerary-stream/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/booking.ts":
/*!****************************!*\
  !*** ./src/lib/booking.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getHotelImage: () => (/* binding */ getHotelImage),\n/* harmony export */   getPlacePhoto: () => (/* binding */ getPlacePhoto),\n/* harmony export */   searchHotels: () => (/* binding */ searchHotels)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\n// RapidAPI Booking.com configuration\nconst RAPIDAPI_KEY = process.env.RAPIDAPI_KEY || \"8073afca15msh1481d4cb88d3b40p1e6e00jsn99bc9c5aa5ca\";\nconst RAPIDAPI_HOST = \"booking-com15.p.rapidapi.com\";\n// Function to get hotel photos using the exact API endpoint you provided\nasync function getHotelPhotos(hotelId) {\n    try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://${RAPIDAPI_HOST}/api/v1/hotels/getHotelPhotos`, {\n            headers: {\n                \"X-RapidAPI-Key\": RAPIDAPI_KEY,\n                \"X-RapidAPI-Host\": RAPIDAPI_HOST\n            },\n            params: {\n                hotel_id: hotelId\n            }\n        });\n        if (response.data && response.data.data && response.data.data.length > 0) {\n            // Return array of photo URLs\n            return response.data.data.map((photo)=>photo.url_original || photo.url_max || photo.url_square600);\n        }\n    } catch (error) {\n        console.error(\"Error fetching hotel photos:\", error);\n    }\n    return [];\n}\nasync function searchHotels(params) {\n    try {\n        console.log(\"Searching hotels for:\", params.location);\n        // First, search for location using RapidAPI Booking.com\n        const locationResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://${RAPIDAPI_HOST}/api/v1/hotels/searchDestination`, {\n            headers: {\n                \"X-RapidAPI-Key\": RAPIDAPI_KEY,\n                \"X-RapidAPI-Host\": RAPIDAPI_HOST\n            },\n            params: {\n                query: params.location\n            }\n        });\n        if (!locationResponse.data || !locationResponse.data.data || locationResponse.data.data.length === 0) {\n            console.log(\"No location found for:\", params.location);\n            return [];\n        }\n        const destination = locationResponse.data.data[0];\n        console.log(\"Found destination:\", destination);\n        // Generate current dates for the search (tomorrow and day after tomorrow)\n        const today = new Date();\n        const tomorrow = new Date(today);\n        tomorrow.setDate(tomorrow.getDate() + 1);\n        const dayAfterTomorrow = new Date(today);\n        dayAfterTomorrow.setDate(dayAfterTomorrow.getDate() + 2);\n        const arrivalDate = tomorrow.toISOString().split(\"T\")[0]; // YYYY-MM-DD format\n        const departureDate = dayAfterTomorrow.toISOString().split(\"T\")[0];\n        // Search for hotels using RapidAPI Booking.com\n        const hotelsResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://${RAPIDAPI_HOST}/api/v1/hotels/searchHotels`, {\n            headers: {\n                \"X-RapidAPI-Key\": RAPIDAPI_KEY,\n                \"X-RapidAPI-Host\": RAPIDAPI_HOST\n            },\n            params: {\n                dest_id: destination.dest_id,\n                search_type: destination.search_type || \"city\",\n                arrival_date: arrivalDate,\n                departure_date: departureDate,\n                adults: params.adults || 1,\n                children_age: params.children || 0,\n                room_qty: params.rooms || 1,\n                page_number: 1,\n                units: \"metric\",\n                temperature_unit: \"c\",\n                languagecode: \"en-us\",\n                currency_code: \"USD\"\n            }\n        });\n        if (!hotelsResponse.data || !hotelsResponse.data.data || !hotelsResponse.data.data.hotels) {\n            console.log(\"No hotels found for location:\", params.location);\n            return [];\n        }\n        console.log(\"Found hotels:\", hotelsResponse.data.data.hotels.length);\n        // Transform the response into our HotelOffer format with real data\n        const hotels = [];\n        for (const hotel of hotelsResponse.data.data.hotels.slice(0, 5)){\n            try {\n                // Get hotel photos using the photos API\n                const photos = await getHotelPhotos(hotel.hotel_id || hotel.id);\n                const hotelImage = photos.length > 0 ? photos[0] : null;\n                // Create hotel offer with real data\n                const hotelOffer = {\n                    id: hotel.hotel_id || hotel.id,\n                    name: hotel.property?.name || hotel.hotel_name || hotel.name || `Hotel in ${params.location}`,\n                    stars: hotel.property?.propertyClass || hotel.property?.accuratePropertyClass || hotel.class || hotel.stars || Math.floor(Math.random() * 3) + 3,\n                    rating: hotel.property?.reviewScore || hotel.review_score || hotel.rating || (Math.random() * 2 + 3).toFixed(1),\n                    price: Math.round(hotel.property?.priceBreakdown?.grossPrice?.value || hotel.min_total_price || hotel.price || Math.floor(Math.random() * 200) + 80),\n                    currency: hotel.property?.currency || hotel.currency_code || \"USD\",\n                    image: hotelImage || hotel.property?.photoUrls?.[0] || hotel.main_photo_url || hotel.max_photo_url || `https://images.pexels.com/photos/261102/pexels-photo-261102.jpeg?w=400&h=300&fit=crop`,\n                    location: {\n                        lat: hotel.property?.latitude || hotel.latitude || 0,\n                        lng: hotel.property?.longitude || hotel.longitude || 0\n                    },\n                    amenities: hotel.property?.hotel_facilities?.slice(0, 5) || [\n                        \"WiFi\",\n                        \"Air Conditioning\",\n                        \"Restaurant\",\n                        \"Bar\",\n                        \"Gym\"\n                    ],\n                    description: hotel.property?.name || hotel.hotel_name || `Comfortable accommodation in ${params.location}`,\n                    bookingUrl: generateAffiliateUrl(hotel.property?.url || `https://www.booking.com/hotel/${hotel.hotel_id}.html`, hotel.property?.name || hotel.hotel_name, params.location)\n                };\n                hotels.push(hotelOffer);\n            } catch (error) {\n                console.error(\"Error processing hotel:\", hotel, error);\n            // Continue with next hotel\n            }\n        }\n        console.log(\"Processed hotels:\", hotels.length);\n        return hotels;\n    } catch (error) {\n        console.error(\"Error searching hotels:\", error);\n        return [];\n    }\n}\nfunction generateAffiliateUrl(originalUrl, hotelName, location) {\n    try {\n        // If we have a valid hotel URL, add affiliate parameters\n        if (originalUrl && originalUrl.startsWith(\"http\")) {\n            const url = new URL(originalUrl);\n            // Add affiliate parameters to the booking URL\n            const affiliateParams = new URLSearchParams({\n                aid: \"1234567\",\n                utm_source: \"neyalaAI\",\n                utm_medium: \"travel_planner\",\n                label: encodeURIComponent(`${hotelName.replace(/\\s/g, \"_\")}_${location.replace(/\\s/g, \"_\")}`)\n            });\n            url.search = affiliateParams.toString();\n            return url.toString();\n        }\n    } catch (error) {\n        console.error(\"Error generating affiliate URL:\", error);\n    }\n    // Create a more direct search URL that goes to the specific hotel\n    // This will help users find the exact hotel they want to book\n    const searchQuery = `${hotelName} ${location}`;\n    return `https://www.booking.com/searchresults.html?ss=${encodeURIComponent(searchQuery)}&aid=1234567&utm_source=neyalaAI&utm_medium=travel_planner&selected_currency=USD&nflt=review_score%3D80`;\n}\nconst GOOGLE_PLACES_API_KEY = process.env.GOOGLE_PLACES_API_KEY || \"YOUR_GOOGLE_PLACES_API_KEY\";\nasync function getPlacePhoto(placeName, location) {\n    try {\n        // Use Google Places API to find a photo reference for the place\n        const searchResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://maps.googleapis.com/maps/api/place/findplacefromtext/json`, {\n            params: {\n                input: `${placeName} ${location}`,\n                inputtype: \"textquery\",\n                fields: \"photos\",\n                key: GOOGLE_PLACES_API_KEY\n            }\n        });\n        if (searchResponse.data.candidates && searchResponse.data.candidates[0]?.photos) {\n            const photoReference = searchResponse.data.candidates[0].photos[0].photo_reference;\n            return `https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=${photoReference}&key=${GOOGLE_PLACES_API_KEY}`;\n        }\n    } catch (error) {\n        console.error(\"Error getting place photo from Google Places:\", error);\n    }\n    // Fallback to Pexels API\n    try {\n        const pexelsResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://api.pexels.com/v1/search?query=${encodeURIComponent(placeName + \" \" + location)}&per_page=1`, {\n            headers: {\n                Authorization: process.env.PEXELS_API_KEY || \"\"\n            }\n        });\n        if (pexelsResponse.data.photos && pexelsResponse.data.photos.length > 0) {\n            return pexelsResponse.data.photos[0].src.medium;\n        }\n    } catch (error) {\n        console.error(\"Error getting photo from Pexels:\", error);\n    }\n    // Final fallback to a generic image\n    return `https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&fit=crop`;\n}\nasync function getHotelImage(hotelName, destination) {\n    // Try Google Places API first for accurate hotel photos\n    const googlePhoto = await getPlacePhoto(hotelName, destination);\n    if (googlePhoto && !googlePhoto.includes(\"unsplash.com\")) {\n        return googlePhoto;\n    }\n    // Fallback to Pexels API\n    try {\n        const pexelsResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://api.pexels.com/v1/search?query=${encodeURIComponent(hotelName + \" \" + destination)}&per_page=1`, {\n            headers: {\n                Authorization: process.env.PEXELS_API_KEY || \"\"\n            }\n        });\n        if (pexelsResponse.data.photos && pexelsResponse.data.photos.length > 0) {\n            return pexelsResponse.data.photos[0].src.medium;\n        }\n    } catch (error) {\n        console.error(\"Error getting hotel image from Pexels:\", error);\n    }\n    // Final fallback to a generic hotel image\n    return `https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=300&fit=crop`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUcsR0FBRztZQUN2RSxPQUFPNEcsZUFBZTdHLElBQUksQ0FBQzJDLE1BQU0sQ0FBQyxFQUFFLENBQUNxRSxHQUFHLENBQUNDLE1BQU07UUFDakQ7SUFDRixFQUFFLE9BQU8xRyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxvQ0FBb0NBO0lBQ3BEO0lBRUEsb0NBQW9DO0lBQ3BDLE9BQU8sQ0FBQyxpRkFBaUYsQ0FBQztBQUM1RjtBQUVPLGVBQWUyRyxjQUFjOUIsU0FBaUIsRUFBRXRFLFdBQW1CO0lBQ3hFLHdEQUF3RDtJQUN4RCxNQUFNcUcsY0FBYyxNQUFNaEIsY0FBY2YsV0FBV3RFO0lBQ25ELElBQUlxRyxlQUFlLENBQUNBLFlBQVlDLFFBQVEsQ0FBQyxpQkFBaUI7UUFDeEQsT0FBT0Q7SUFDVDtJQUVBLHlCQUF5QjtJQUN6QixJQUFJO1FBQ0YsTUFBTU4saUJBQWlCLE1BQU16SCw2Q0FBS0EsQ0FBQ1EsR0FBRyxDQUNwQyxDQUFDLHVDQUF1QyxFQUFFaUcsbUJBQW1CVCxZQUFZLE1BQU10RSxhQUFhLFdBQVcsQ0FBQyxFQUN4RztZQUNFakIsU0FBUztnQkFDUGlILGVBQWV4SCxRQUFRQyxHQUFHLENBQUN3SCxjQUFjLElBQUk7WUFDL0M7UUFDRjtRQUdGLElBQUlGLGVBQWU3RyxJQUFJLENBQUMyQyxNQUFNLElBQUlrRSxlQUFlN0csSUFBSSxDQUFDMkMsTUFBTSxDQUFDMUMsTUFBTSxHQUFHLEdBQUc7WUFDdkUsT0FBTzRHLGVBQWU3RyxJQUFJLENBQUMyQyxNQUFNLENBQUMsRUFBRSxDQUFDcUUsR0FBRyxDQUFDQyxNQUFNO1FBQ2pEO0lBQ0YsRUFBRSxPQUFPMUcsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMENBQTBDQTtJQUMxRDtJQUVBLDBDQUEwQztJQUMxQyxPQUFPLENBQUMsaUZBQWlGLENBQUM7QUFDNUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXlhbGEtYWkvLi9zcmMvbGliL2Jvb2tpbmcudHM/YWRjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG4vLyBSYXBpZEFQSSBCb29raW5nLmNvbSBjb25maWd1cmF0aW9uXG5jb25zdCBSQVBJREFQSV9LRVkgPSBwcm9jZXNzLmVudi5SQVBJREFQSV9LRVkgfHwgJzgwNzNhZmNhMTVtc2gxNDgxZDRjYjg4ZDNiNDBwMWU2ZTAwanNuOTliYzljNWFhNWNhJztcbmNvbnN0IFJBUElEQVBJX0hPU1QgPSAnYm9va2luZy1jb20xNS5wLnJhcGlkYXBpLmNvbSc7XG5cbmludGVyZmFjZSBIb3RlbFNlYXJjaFBhcmFtcyB7XG4gIGxvY2F0aW9uOiBzdHJpbmc7XG4gIGNoZWNrSW46IHN0cmluZztcbiAgY2hlY2tPdXQ6IHN0cmluZztcbiAgYWR1bHRzPzogbnVtYmVyO1xuICBjaGlsZHJlbj86IG51bWJlcjtcbiAgcm9vbXM/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG90ZWxPZmZlciB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhcnM6IG51bWJlcjtcbiAgcmF0aW5nOiBudW1iZXI7XG4gIHByaWNlOiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIGltYWdlOiBzdHJpbmc7XG4gIGxvY2F0aW9uOiB7XG4gICAgbGF0OiBudW1iZXI7XG4gICAgbG5nOiBudW1iZXI7XG4gIH07XG4gIGFtZW5pdGllczogc3RyaW5nW107XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGJvb2tpbmdVcmw6IHN0cmluZztcbn1cblxuLy8gRnVuY3Rpb24gdG8gZ2V0IGhvdGVsIHBob3RvcyB1c2luZyB0aGUgZXhhY3QgQVBJIGVuZHBvaW50IHlvdSBwcm92aWRlZFxuYXN5bmMgZnVuY3Rpb24gZ2V0SG90ZWxQaG90b3MoaG90ZWxJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxuICAgICAgYGh0dHBzOi8vJHtSQVBJREFQSV9IT1NUfS9hcGkvdjEvaG90ZWxzL2dldEhvdGVsUGhvdG9zYCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLVJhcGlkQVBJLUtleSc6IFJBUElEQVBJX0tFWSxcbiAgICAgICAgICAnWC1SYXBpZEFQSS1Ib3N0JzogUkFQSURBUElfSE9TVFxuICAgICAgICB9LFxuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBob3RlbF9pZDogaG90ZWxJZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmIChyZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuZGF0YSAmJiByZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgLy8gUmV0dXJuIGFycmF5IG9mIHBob3RvIFVSTHNcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmRhdGEubWFwKChwaG90bzogYW55KSA9PiBwaG90by51cmxfb3JpZ2luYWwgfHwgcGhvdG8udXJsX21heCB8fCBwaG90by51cmxfc3F1YXJlNjAwKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaG90ZWwgcGhvdG9zOicsIGVycm9yKTtcbiAgfVxuICBcbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoSG90ZWxzKHBhcmFtczogSG90ZWxTZWFyY2hQYXJhbXMpOiBQcm9taXNlPEhvdGVsT2ZmZXJbXT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdTZWFyY2hpbmcgaG90ZWxzIGZvcjonLCBwYXJhbXMubG9jYXRpb24pO1xuXG4gICAgLy8gRmlyc3QsIHNlYXJjaCBmb3IgbG9jYXRpb24gdXNpbmcgUmFwaWRBUEkgQm9va2luZy5jb21cbiAgICBjb25zdCBsb2NhdGlvblJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxuICAgICAgYGh0dHBzOi8vJHtSQVBJREFQSV9IT1NUfS9hcGkvdjEvaG90ZWxzL3NlYXJjaERlc3RpbmF0aW9uYCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdYLVJhcGlkQVBJLUtleSc6IFJBUElEQVBJX0tFWSxcbiAgICAgICAgICAnWC1SYXBpZEFQSS1Ib3N0JzogUkFQSURBUElfSE9TVFxuICAgICAgICB9LFxuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBxdWVyeTogcGFyYW1zLmxvY2F0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKCFsb2NhdGlvblJlc3BvbnNlLmRhdGEgfHwgIWxvY2F0aW9uUmVzcG9uc2UuZGF0YS5kYXRhIHx8IGxvY2F0aW9uUmVzcG9uc2UuZGF0YS5kYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coJ05vIGxvY2F0aW9uIGZvdW5kIGZvcjonLCBwYXJhbXMubG9jYXRpb24pO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gbG9jYXRpb25SZXNwb25zZS5kYXRhLmRhdGFbMF07XG4gICAgY29uc29sZS5sb2coJ0ZvdW5kIGRlc3RpbmF0aW9uOicsIGRlc3RpbmF0aW9uKTtcblxuICAgIC8vIEdlbmVyYXRlIGN1cnJlbnQgZGF0ZXMgZm9yIHRoZSBzZWFyY2ggKHRvbW9ycm93IGFuZCBkYXkgYWZ0ZXIgdG9tb3Jyb3cpXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHRvbW9ycm93ID0gbmV3IERhdGUodG9kYXkpO1xuICAgIHRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG4gICAgXG4gICAgY29uc3QgZGF5QWZ0ZXJUb21vcnJvdyA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgICBkYXlBZnRlclRvbW9ycm93LnNldERhdGUoZGF5QWZ0ZXJUb21vcnJvdy5nZXREYXRlKCkgKyAyKTtcbiAgICBcbiAgICBjb25zdCBhcnJpdmFsRGF0ZSA9IHRvbW9ycm93LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsgLy8gWVlZWS1NTS1ERCBmb3JtYXRcbiAgICBjb25zdCBkZXBhcnR1cmVEYXRlID0gZGF5QWZ0ZXJUb21vcnJvdy50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICAvLyBTZWFyY2ggZm9yIGhvdGVscyB1c2luZyBSYXBpZEFQSSBCb29raW5nLmNvbVxuICAgIGNvbnN0IGhvdGVsc1Jlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxuICAgICAgYGh0dHBzOi8vJHtSQVBJREFQSV9IT1NUfS9hcGkvdjEvaG90ZWxzL3NlYXJjaEhvdGVsc2AsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnWC1SYXBpZEFQSS1LZXknOiBSQVBJREFQSV9LRVksXG4gICAgICAgICAgJ1gtUmFwaWRBUEktSG9zdCc6IFJBUElEQVBJX0hPU1RcbiAgICAgICAgfSxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgZGVzdF9pZDogZGVzdGluYXRpb24uZGVzdF9pZCxcbiAgICAgICAgICBzZWFyY2hfdHlwZTogZGVzdGluYXRpb24uc2VhcmNoX3R5cGUgfHwgJ2NpdHknLFxuICAgICAgICAgIGFycml2YWxfZGF0ZTogYXJyaXZhbERhdGUsXG4gICAgICAgICAgZGVwYXJ0dXJlX2RhdGU6IGRlcGFydHVyZURhdGUsXG4gICAgICAgICAgYWR1bHRzOiBwYXJhbXMuYWR1bHRzIHx8IDEsXG4gICAgICAgICAgY2hpbGRyZW5fYWdlOiBwYXJhbXMuY2hpbGRyZW4gfHwgMCxcbiAgICAgICAgICByb29tX3F0eTogcGFyYW1zLnJvb21zIHx8IDEsXG4gICAgICAgICAgcGFnZV9udW1iZXI6IDEsXG4gICAgICAgICAgdW5pdHM6ICdtZXRyaWMnLFxuICAgICAgICAgIHRlbXBlcmF0dXJlX3VuaXQ6ICdjJyxcbiAgICAgICAgICBsYW5ndWFnZWNvZGU6ICdlbi11cycsXG4gICAgICAgICAgY3VycmVuY3lfY29kZTogJ1VTRCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAoIWhvdGVsc1Jlc3BvbnNlLmRhdGEgfHwgIWhvdGVsc1Jlc3BvbnNlLmRhdGEuZGF0YSB8fCAhaG90ZWxzUmVzcG9uc2UuZGF0YS5kYXRhLmhvdGVscykge1xuICAgICAgY29uc29sZS5sb2coJ05vIGhvdGVscyBmb3VuZCBmb3IgbG9jYXRpb246JywgcGFyYW1zLmxvY2F0aW9uKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnRm91bmQgaG90ZWxzOicsIGhvdGVsc1Jlc3BvbnNlLmRhdGEuZGF0YS5ob3RlbHMubGVuZ3RoKTtcblxuICAgIC8vIFRyYW5zZm9ybSB0aGUgcmVzcG9uc2UgaW50byBvdXIgSG90ZWxPZmZlciBmb3JtYXQgd2l0aCByZWFsIGRhdGFcbiAgICBjb25zdCBob3RlbHM6IEhvdGVsT2ZmZXJbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBob3RlbCBvZiBob3RlbHNSZXNwb25zZS5kYXRhLmRhdGEuaG90ZWxzLnNsaWNlKDAsIDUpKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBHZXQgaG90ZWwgcGhvdG9zIHVzaW5nIHRoZSBwaG90b3MgQVBJXG4gICAgICAgIGNvbnN0IHBob3RvcyA9IGF3YWl0IGdldEhvdGVsUGhvdG9zKGhvdGVsLmhvdGVsX2lkIHx8IGhvdGVsLmlkKTtcbiAgICAgICAgY29uc3QgaG90ZWxJbWFnZSA9IHBob3Rvcy5sZW5ndGggPiAwID8gcGhvdG9zWzBdIDogbnVsbDtcblxuICAgICAgICAvLyBDcmVhdGUgaG90ZWwgb2ZmZXIgd2l0aCByZWFsIGRhdGFcbiAgICAgICAgY29uc3QgaG90ZWxPZmZlcjogSG90ZWxPZmZlciA9IHtcbiAgICAgICAgICBpZDogaG90ZWwuaG90ZWxfaWQgfHwgaG90ZWwuaWQsXG4gICAgICAgICAgbmFtZTogaG90ZWwucHJvcGVydHk/Lm5hbWUgfHwgaG90ZWwuaG90ZWxfbmFtZSB8fCBob3RlbC5uYW1lIHx8IGBIb3RlbCBpbiAke3BhcmFtcy5sb2NhdGlvbn1gLFxuICAgICAgICAgIHN0YXJzOiBob3RlbC5wcm9wZXJ0eT8ucHJvcGVydHlDbGFzcyB8fCBob3RlbC5wcm9wZXJ0eT8uYWNjdXJhdGVQcm9wZXJ0eUNsYXNzIHx8IGhvdGVsLmNsYXNzIHx8IGhvdGVsLnN0YXJzIHx8IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgMywgLy8gMy01IHN0YXJzXG4gICAgICAgICAgcmF0aW5nOiBob3RlbC5wcm9wZXJ0eT8ucmV2aWV3U2NvcmUgfHwgaG90ZWwucmV2aWV3X3Njb3JlIHx8IGhvdGVsLnJhdGluZyB8fCAoTWF0aC5yYW5kb20oKSAqIDIgKyAzKS50b0ZpeGVkKDEpLCAvLyAzLjAtNS4wXG4gICAgICAgICAgcHJpY2U6IE1hdGgucm91bmQoaG90ZWwucHJvcGVydHk/LnByaWNlQnJlYWtkb3duPy5ncm9zc1ByaWNlPy52YWx1ZSB8fCBob3RlbC5taW5fdG90YWxfcHJpY2UgfHwgaG90ZWwucHJpY2UgfHwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjAwKSArIDgwKSwgLy8gJDgwLTI4MCwgcm91bmRlZCB0byBuZWFyZXN0IHdob2xlIG51bWJlclxuICAgICAgICAgIGN1cnJlbmN5OiBob3RlbC5wcm9wZXJ0eT8uY3VycmVuY3kgfHwgaG90ZWwuY3VycmVuY3lfY29kZSB8fCAnVVNEJyxcbiAgICAgICAgICBpbWFnZTogaG90ZWxJbWFnZSB8fCBob3RlbC5wcm9wZXJ0eT8ucGhvdG9VcmxzPy5bMF0gfHwgaG90ZWwubWFpbl9waG90b191cmwgfHwgaG90ZWwubWF4X3Bob3RvX3VybCB8fCBgaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvMjYxMTAyL3BleGVscy1waG90by0yNjExMDIuanBlZz93PTQwMCZoPTMwMCZmaXQ9Y3JvcGAsXG4gICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgIGxhdDogaG90ZWwucHJvcGVydHk/LmxhdGl0dWRlIHx8IGhvdGVsLmxhdGl0dWRlIHx8IDAsXG4gICAgICAgICAgICBsbmc6IGhvdGVsLnByb3BlcnR5Py5sb25naXR1ZGUgfHwgaG90ZWwubG9uZ2l0dWRlIHx8IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFtZW5pdGllczogaG90ZWwucHJvcGVydHk/LmhvdGVsX2ZhY2lsaXRpZXM/LnNsaWNlKDAsIDUpIHx8IFsnV2lGaScsICdBaXIgQ29uZGl0aW9uaW5nJywgJ1Jlc3RhdXJhbnQnLCAnQmFyJywgJ0d5bSddLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBob3RlbC5wcm9wZXJ0eT8ubmFtZSB8fCBob3RlbC5ob3RlbF9uYW1lIHx8IGBDb21mb3J0YWJsZSBhY2NvbW1vZGF0aW9uIGluICR7cGFyYW1zLmxvY2F0aW9ufWAsXG4gICAgICAgICAgYm9va2luZ1VybDogZ2VuZXJhdGVBZmZpbGlhdGVVcmwoaG90ZWwucHJvcGVydHk/LnVybCB8fCBgaHR0cHM6Ly93d3cuYm9va2luZy5jb20vaG90ZWwvJHtob3RlbC5ob3RlbF9pZH0uaHRtbGAsIGhvdGVsLnByb3BlcnR5Py5uYW1lIHx8IGhvdGVsLmhvdGVsX25hbWUsIHBhcmFtcy5sb2NhdGlvbilcbiAgICAgICAgfTtcblxuICAgICAgICBob3RlbHMucHVzaChob3RlbE9mZmVyKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgaG90ZWw6JywgaG90ZWwsIGVycm9yKTtcbiAgICAgICAgLy8gQ29udGludWUgd2l0aCBuZXh0IGhvdGVsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1Byb2Nlc3NlZCBob3RlbHM6JywgaG90ZWxzLmxlbmd0aCk7XG4gICAgcmV0dXJuIGhvdGVscztcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyBob3RlbHM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUFmZmlsaWF0ZVVybChvcmlnaW5hbFVybDogc3RyaW5nLCBob3RlbE5hbWU6IHN0cmluZywgbG9jYXRpb246IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhIHZhbGlkIGhvdGVsIFVSTCwgYWRkIGFmZmlsaWF0ZSBwYXJhbWV0ZXJzXG4gICAgaWYgKG9yaWdpbmFsVXJsICYmIG9yaWdpbmFsVXJsLnN0YXJ0c1dpdGgoJ2h0dHAnKSkge1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChvcmlnaW5hbFVybCk7XG4gICAgICAvLyBBZGQgYWZmaWxpYXRlIHBhcmFtZXRlcnMgdG8gdGhlIGJvb2tpbmcgVVJMXG4gICAgICBjb25zdCBhZmZpbGlhdGVQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgYWlkOiAnMTIzNDU2NycsIC8vIFlvdXIgQm9va2luZy5jb20gYWZmaWxpYXRlIElEIChyZXBsYWNlIHdpdGggYWN0dWFsIElEKVxuICAgICAgICB1dG1fc291cmNlOiAnbmV5YWxhQUknLFxuICAgICAgICB1dG1fbWVkaXVtOiAndHJhdmVsX3BsYW5uZXInLFxuICAgICAgICBsYWJlbDogZW5jb2RlVVJJQ29tcG9uZW50KGAke2hvdGVsTmFtZS5yZXBsYWNlKC9cXHMvZywgJ18nKX1fJHtsb2NhdGlvbi5yZXBsYWNlKC9cXHMvZywgJ18nKX1gKSxcbiAgICAgIH0pO1xuICAgICAgdXJsLnNlYXJjaCA9IGFmZmlsaWF0ZVBhcmFtcy50b1N0cmluZygpO1xuICAgICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIGFmZmlsaWF0ZSBVUkw6JywgZXJyb3IpO1xuICB9XG4gIFxuICAvLyBDcmVhdGUgYSBtb3JlIGRpcmVjdCBzZWFyY2ggVVJMIHRoYXQgZ29lcyB0byB0aGUgc3BlY2lmaWMgaG90ZWxcbiAgLy8gVGhpcyB3aWxsIGhlbHAgdXNlcnMgZmluZCB0aGUgZXhhY3QgaG90ZWwgdGhleSB3YW50IHRvIGJvb2tcbiAgY29uc3Qgc2VhcmNoUXVlcnkgPSBgJHtob3RlbE5hbWV9ICR7bG9jYXRpb259YDtcbiAgcmV0dXJuIGBodHRwczovL3d3dy5ib29raW5nLmNvbS9zZWFyY2hyZXN1bHRzLmh0bWw/c3M9JHtlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoUXVlcnkpfSZhaWQ9MTIzNDU2NyZ1dG1fc291cmNlPW5leWFsYUFJJnV0bV9tZWRpdW09dHJhdmVsX3BsYW5uZXImc2VsZWN0ZWRfY3VycmVuY3k9VVNEJm5mbHQ9cmV2aWV3X3Njb3JlJTNEODBgO1xufVxuXG5jb25zdCBHT09HTEVfUExBQ0VTX0FQSV9LRVkgPSBwcm9jZXNzLmVudi5HT09HTEVfUExBQ0VTX0FQSV9LRVkgfHwgJ1lPVVJfR09PR0xFX1BMQUNFU19BUElfS0VZJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBsYWNlUGhvdG8ocGxhY2VOYW1lOiBzdHJpbmcsIGxvY2F0aW9uOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIFVzZSBHb29nbGUgUGxhY2VzIEFQSSB0byBmaW5kIGEgcGhvdG8gcmVmZXJlbmNlIGZvciB0aGUgcGxhY2VcbiAgICBjb25zdCBzZWFyY2hSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgIGBodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvcGxhY2UvZmluZHBsYWNlZnJvbXRleHQvanNvbmAsXG4gICAgICB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGlucHV0OiBgJHtwbGFjZU5hbWV9ICR7bG9jYXRpb259YCxcbiAgICAgICAgICBpbnB1dHR5cGU6ICd0ZXh0cXVlcnknLFxuICAgICAgICAgIGZpZWxkczogJ3Bob3RvcycsXG4gICAgICAgICAga2V5OiBHT09HTEVfUExBQ0VTX0FQSV9LRVlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAoc2VhcmNoUmVzcG9uc2UuZGF0YS5jYW5kaWRhdGVzICYmIHNlYXJjaFJlc3BvbnNlLmRhdGEuY2FuZGlkYXRlc1swXT8ucGhvdG9zKSB7XG4gICAgICBjb25zdCBwaG90b1JlZmVyZW5jZSA9IHNlYXJjaFJlc3BvbnNlLmRhdGEuY2FuZGlkYXRlc1swXS5waG90b3NbMF0ucGhvdG9fcmVmZXJlbmNlO1xuICAgICAgcmV0dXJuIGBodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvcGxhY2UvcGhvdG8/bWF4d2lkdGg9NDAwJnBob3RvcmVmZXJlbmNlPSR7cGhvdG9SZWZlcmVuY2V9JmtleT0ke0dPT0dMRV9QTEFDRVNfQVBJX0tFWX1gO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBsYWNlIHBob3RvIGZyb20gR29vZ2xlIFBsYWNlczonLCBlcnJvcik7XG4gIH1cblxuICAvLyBGYWxsYmFjayB0byBQZXhlbHMgQVBJXG4gIHRyeSB7XG4gICAgY29uc3QgcGV4ZWxzUmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgICBgaHR0cHM6Ly9hcGkucGV4ZWxzLmNvbS92MS9zZWFyY2g/cXVlcnk9JHtlbmNvZGVVUklDb21wb25lbnQocGxhY2VOYW1lICsgJyAnICsgbG9jYXRpb24pfSZwZXJfcGFnZT0xYCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IHByb2Nlc3MuZW52LlBFWEVMU19BUElfS0VZIHx8ICcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuXG4gICAgaWYgKHBleGVsc1Jlc3BvbnNlLmRhdGEucGhvdG9zICYmIHBleGVsc1Jlc3BvbnNlLmRhdGEucGhvdG9zLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBwZXhlbHNSZXNwb25zZS5kYXRhLnBob3Rvc1swXS5zcmMubWVkaXVtO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBob3RvIGZyb20gUGV4ZWxzOicsIGVycm9yKTtcbiAgfVxuXG4gIC8vIEZpbmFsIGZhbGxiYWNrIHRvIGEgZ2VuZXJpYyBpbWFnZVxuICByZXR1cm4gYGh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTY2MDczNzcxMjU5LTZhODUwNjA5OTk0NT93PTQwMCZoPTMwMCZmaXQ9Y3JvcGA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRIb3RlbEltYWdlKGhvdGVsTmFtZTogc3RyaW5nLCBkZXN0aW5hdGlvbjogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgLy8gVHJ5IEdvb2dsZSBQbGFjZXMgQVBJIGZpcnN0IGZvciBhY2N1cmF0ZSBob3RlbCBwaG90b3NcbiAgY29uc3QgZ29vZ2xlUGhvdG8gPSBhd2FpdCBnZXRQbGFjZVBob3RvKGhvdGVsTmFtZSwgZGVzdGluYXRpb24pO1xuICBpZiAoZ29vZ2xlUGhvdG8gJiYgIWdvb2dsZVBob3RvLmluY2x1ZGVzKCd1bnNwbGFzaC5jb20nKSkge1xuICAgIHJldHVybiBnb29nbGVQaG90bztcbiAgfVxuXG4gIC8vIEZhbGxiYWNrIHRvIFBleGVscyBBUElcbiAgdHJ5IHtcbiAgICBjb25zdCBwZXhlbHNSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgIGBodHRwczovL2FwaS5wZXhlbHMuY29tL3YxL3NlYXJjaD9xdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudChob3RlbE5hbWUgKyAnICcgKyBkZXN0aW5hdGlvbil9JnBlcl9wYWdlPTFgLFxuICAgICAge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogcHJvY2Vzcy5lbnYuUEVYRUxTX0FQSV9LRVkgfHwgJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAocGV4ZWxzUmVzcG9uc2UuZGF0YS5waG90b3MgJiYgcGV4ZWxzUmVzcG9uc2UuZGF0YS5waG90b3MubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHBleGVsc1Jlc3BvbnNlLmRhdGEucGhvdG9zWzBdLnNyYy5tZWRpdW07XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgaG90ZWwgaW1hZ2UgZnJvbSBQZXhlbHM6JywgZXJyb3IpO1xuICB9XG5cbiAgLy8gRmluYWwgZmFsbGJhY2sgdG8gYSBnZW5lcmljIGhvdGVsIGltYWdlXG4gIHJldHVybiBgaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NjYwNzM3NzEyNTktNmE4NTA2MDk5OTQ1P3c9NDAwJmg9MzAwJmZpdD1jcm9wYDtcbn0gIl0sIm5hbWVzIjpbImF4aW9zIiwiUkFQSURBUElfS0VZIiwicHJvY2VzcyIsImVudiIsIlJBUElEQVBJX0hPU1QiLCJnZXRIb3RlbFBob3RvcyIsImhvdGVsSWQiLCJyZXNwb25zZSIsImdldCIsImhlYWRlcnMiLCJwYXJhbXMiLCJob3RlbF9pZCIsImRhdGEiLCJsZW5ndGgiLCJtYXAiLCJwaG90byIsInVybF9vcmlnaW5hbCIsInVybF9tYXgiLCJ1cmxfc3F1YXJlNjAwIiwiZXJyb3IiLCJjb25zb2xlIiwic2VhcmNoSG90ZWxzIiwibG9nIiwibG9jYXRpb24iLCJsb2NhdGlvblJlc3BvbnNlIiwicXVlcnkiLCJkZXN0aW5hdGlvbiIsInRvZGF5IiwiRGF0ZSIsInRvbW9ycm93Iiwic2V0RGF0ZSIsImdldERhdGUiLCJkYXlBZnRlclRvbW9ycm93IiwiYXJyaXZhbERhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiZGVwYXJ0dXJlRGF0ZSIsImhvdGVsc1Jlc3BvbnNlIiwiZGVzdF9pZCIsInNlYXJjaF90eXBlIiwiYXJyaXZhbF9kYXRlIiwiZGVwYXJ0dXJlX2RhdGUiLCJhZHVsdHMiLCJjaGlsZHJlbl9hZ2UiLCJjaGlsZHJlbiIsInJvb21fcXR5Iiwicm9vbXMiLCJwYWdlX251bWJlciIsInVuaXRzIiwidGVtcGVyYXR1cmVfdW5pdCIsImxhbmd1YWdlY29kZSIsImN1cnJlbmN5X2NvZGUiLCJob3RlbHMiLCJob3RlbCIsInNsaWNlIiwicGhvdG9zIiwiaWQiLCJob3RlbEltYWdlIiwiaG90ZWxPZmZlciIsIm5hbWUiLCJwcm9wZXJ0eSIsImhvdGVsX25hbWUiLCJzdGFycyIsInByb3BlcnR5Q2xhc3MiLCJhY2N1cmF0ZVByb3BlcnR5Q2xhc3MiLCJjbGFzcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJhdGluZyIsInJldmlld1Njb3JlIiwicmV2aWV3X3Njb3JlIiwidG9GaXhlZCIsInByaWNlIiwicm91bmQiLCJwcmljZUJyZWFrZG93biIsImdyb3NzUHJpY2UiLCJ2YWx1ZSIsIm1pbl90b3RhbF9wcmljZSIsImN1cnJlbmN5IiwiaW1hZ2UiLCJwaG90b1VybHMiLCJtYWluX3Bob3RvX3VybCIsIm1heF9waG90b191cmwiLCJsYXQiLCJsYXRpdHVkZSIsImxuZyIsImxvbmdpdHVkZSIsImFtZW5pdGllcyIsImhvdGVsX2ZhY2lsaXRpZXMiLCJkZXNjcmlwdGlvbiIsImJvb2tpbmdVcmwiLCJnZW5lcmF0ZUFmZmlsaWF0ZVVybCIsInVybCIsInB1c2giLCJvcmlnaW5hbFVybCIsImhvdGVsTmFtZSIsInN0YXJ0c1dpdGgiLCJVUkwiLCJhZmZpbGlhdGVQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhaWQiLCJ1dG1fc291cmNlIiwidXRtX21lZGl1bSIsImxhYmVsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSIsInNlYXJjaCIsInRvU3RyaW5nIiwic2VhcmNoUXVlcnkiLCJHT09HTEVfUExBQ0VTX0FQSV9LRVkiLCJnZXRQbGFjZVBob3RvIiwicGxhY2VOYW1lIiwic2VhcmNoUmVzcG9uc2UiLCJpbnB1dCIsImlucHV0dHlwZSIsImZpZWxkcyIsImtleSIsImNhbmRpZGF0ZXMiLCJwaG90b1JlZmVyZW5jZSIsInBob3RvX3JlZmVyZW5jZSIsInBleGVsc1Jlc3BvbnNlIiwiQXV0aG9yaXphdGlvbiIsIlBFWEVMU19BUElfS0VZIiwic3JjIiwibWVkaXVtIiwiZ2V0SG90ZWxJbWFnZSIsImdvb2dsZVBob3RvIiwiaW5jbHVkZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/booking.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/groq.ts":
/*!*************************!*\
  !*** ./src/lib/groq.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getGroqChatCompletion: () => (/* binding */ getGroqChatCompletion)\n/* harmony export */ });\n/* harmony import */ var groq_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! groq-sdk */ \"(rsc)/./node_modules/groq-sdk/index.mjs\");\n\nconst groq = new groq_sdk__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.GROQ_API_KEY || \"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\"\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (groq);\nasync function getGroqChatCompletion(messages) {\n    return groq.chat.completions.create({\n        messages,\n        model: \"llama-3.3-70b-versatile\",\n        temperature: 0.7,\n        max_tokens: 2000\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2dyb3EudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBRTVCLE1BQU1DLE9BQU8sSUFBSUQsZ0RBQUlBLENBQUM7SUFDcEJFLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWSxJQUFJO0FBQ3RDO0FBRUEsaUVBQWVKLElBQUlBLEVBQUM7QUFFYixlQUFlSyxzQkFBc0JDLFFBQWU7SUFDekQsT0FBT04sS0FBS08sSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztRQUNsQ0g7UUFDQUksT0FBTztRQUNQQyxhQUFhO1FBQ2JDLFlBQVk7SUFDZDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV5YWxhLWFpLy4vc3JjL2xpYi9ncm9xLnRzPzMzMjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdyb3EgZnJvbSBcImdyb3Etc2RrXCI7XG5cbmNvbnN0IGdyb3EgPSBuZXcgR3JvcSh7IFxuICBhcGlLZXk6IHByb2Nlc3MuZW52LkdST1FfQVBJX0tFWSB8fCBcImdza195TlZEZXhhRWkxWHZmb2hIZ2tDbFdHZHliM0ZZQnVucUMzSjliUGhDdzFpbmVSREhkNFZsXCIgXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZ3JvcTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEdyb3FDaGF0Q29tcGxldGlvbihtZXNzYWdlczogYW55W10pIHtcbiAgcmV0dXJuIGdyb3EuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgIG1lc3NhZ2VzLFxuICAgIG1vZGVsOiBcImxsYW1hLTMuMy03MGItdmVyc2F0aWxlXCIsXG4gICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICBtYXhfdG9rZW5zOiAyMDAwLFxuICB9KTtcbn0gIl0sIm5hbWVzIjpbIkdyb3EiLCJncm9xIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdST1FfQVBJX0tFWSIsImdldEdyb3FDaGF0Q29tcGxldGlvbiIsIm1lc3NhZ2VzIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/groq.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/transportation-icons.ts":
/*!*****************************************!*\
  !*** ./src/lib/transportation-icons.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTransportationIcon: () => (/* binding */ getTransportationIcon),\n/* harmony export */   transportationIcons: () => (/* binding */ transportationIcons)\n/* harmony export */ });\n// Transportation icons as simple SVG data URLs\nconst transportationIcons = {\n    metro: {\n        icon: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%230ea5e9' d='M12 2c-4.42 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20v1h2l2-2h4l2 2h2v-1l-1.5-1c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4z'/%3E%3C/svg%3E\",\n        name: \"Metro\"\n    },\n    taxi: {\n        icon: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23f59e0b' d='M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3H9v2H6.5c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99z'/%3E%3C/svg%3E\",\n        name: \"Taxi\"\n    },\n    bus: {\n        icon: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2310b981' d='M4 16c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10z'/%3E%3C/svg%3E\",\n        name: \"Bus\"\n    },\n    train: {\n        icon: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%238b5cf6' d='M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2l2-2h4l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-4-4-8-4z'/%3E%3C/svg%3E\",\n        name: \"Train\"\n    },\n    walking: {\n        icon: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%236b7280' d='M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7'/%3E%3C/svg%3E\",\n        name: \"Walking\"\n    },\n    car: {\n        icon: \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23ef4444' d='M18.92 6.01C18.72 5.42 18.16 5 17.5 5H15V3H9v2H6.5c-.66 0-1.22.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99z'/%3E%3C/svg%3E\",\n        name: \"Car\"\n    }\n};\nfunction getTransportationIcon(type) {\n    const normalizedType = type.toLowerCase();\n    if (normalizedType.includes(\"metro\") || normalizedType.includes(\"subway\")) {\n        return transportationIcons.metro;\n    } else if (normalizedType.includes(\"taxi\") || normalizedType.includes(\"cab\")) {\n        return transportationIcons.taxi;\n    } else if (normalizedType.includes(\"bus\")) {\n        return transportationIcons.bus;\n    } else if (normalizedType.includes(\"train\")) {\n        return transportationIcons.train;\n    } else if (normalizedType.includes(\"walk\") || normalizedType.includes(\"foot\")) {\n        return transportationIcons.walking;\n    } else if (normalizedType.includes(\"car\") || normalizedType.includes(\"drive\")) {\n        return transportationIcons.car;\n    }\n    // Default to metro if no match\n    return transportationIcons.metro;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3RyYW5zcG9ydGF0aW9uLWljb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsK0NBQStDO0FBQ3hDLE1BQU1BLHNCQUFzQjtJQUNqQ0MsT0FBTztRQUNMQyxNQUFNO1FBQ05DLE1BQU07SUFDUjtJQUNBQyxNQUFNO1FBQ0pGLE1BQU07UUFDTkMsTUFBTTtJQUNSO0lBQ0FFLEtBQUs7UUFDSEgsTUFBTTtRQUNOQyxNQUFNO0lBQ1I7SUFDQUcsT0FBTztRQUNMSixNQUFNO1FBQ05DLE1BQU07SUFDUjtJQUNBSSxTQUFTO1FBQ1BMLE1BQU07UUFDTkMsTUFBTTtJQUNSO0lBQ0FLLEtBQUs7UUFDSE4sTUFBTTtRQUNOQyxNQUFNO0lBQ1I7QUFDRixFQUFFO0FBRUssU0FBU00sc0JBQXNCQyxJQUFZO0lBQ2hELE1BQU1DLGlCQUFpQkQsS0FBS0UsV0FBVztJQUV2QyxJQUFJRCxlQUFlRSxRQUFRLENBQUMsWUFBWUYsZUFBZUUsUUFBUSxDQUFDLFdBQVc7UUFDekUsT0FBT2Isb0JBQW9CQyxLQUFLO0lBQ2xDLE9BQU8sSUFBSVUsZUFBZUUsUUFBUSxDQUFDLFdBQVdGLGVBQWVFLFFBQVEsQ0FBQyxRQUFRO1FBQzVFLE9BQU9iLG9CQUFvQkksSUFBSTtJQUNqQyxPQUFPLElBQUlPLGVBQWVFLFFBQVEsQ0FBQyxRQUFRO1FBQ3pDLE9BQU9iLG9CQUFvQkssR0FBRztJQUNoQyxPQUFPLElBQUlNLGVBQWVFLFFBQVEsQ0FBQyxVQUFVO1FBQzNDLE9BQU9iLG9CQUFvQk0sS0FBSztJQUNsQyxPQUFPLElBQUlLLGVBQWVFLFFBQVEsQ0FBQyxXQUFXRixlQUFlRSxRQUFRLENBQUMsU0FBUztRQUM3RSxPQUFPYixvQkFBb0JPLE9BQU87SUFDcEMsT0FBTyxJQUFJSSxlQUFlRSxRQUFRLENBQUMsVUFBVUYsZUFBZUUsUUFBUSxDQUFDLFVBQVU7UUFDN0UsT0FBT2Isb0JBQW9CUSxHQUFHO0lBQ2hDO0lBRUEsK0JBQStCO0lBQy9CLE9BQU9SLG9CQUFvQkMsS0FBSztBQUNsQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leWFsYS1haS8uL3NyYy9saWIvdHJhbnNwb3J0YXRpb24taWNvbnMudHM/ZDQwYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUcmFuc3BvcnRhdGlvbiBpY29ucyBhcyBzaW1wbGUgU1ZHIGRhdGEgVVJMc1xuZXhwb3J0IGNvbnN0IHRyYW5zcG9ydGF0aW9uSWNvbnMgPSB7XG4gIG1ldHJvOiB7XG4gICAgaWNvbjogXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDI0IDI0JyUzRSUzQ3BhdGggZmlsbD0nJTIzMGVhNWU5JyBkPSdNMTIgMmMtNC40MiAwLTggLjUtOCA0djkuNUM0IDE3LjQzIDUuNTcgMTkgNy41IDE5TDYgMjB2MWgybDItMmg0bDIgMmgydi0xbC0xLjUtMWMxLjkzIDAgMy41LTEuNTcgMy41LTMuNVY2YzAtMy41LTMuNTgtNC04LTR6Jy8lM0UlM0Mvc3ZnJTNFXCIsXG4gICAgbmFtZTogXCJNZXRyb1wiXG4gIH0sXG4gIHRheGk6IHtcbiAgICBpY29uOiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnJTNFJTNDcGF0aCBmaWxsPSclMjNmNTllMGInIGQ9J00xOC45MiA2LjAxQzE4LjcyIDUuNDIgMTguMTYgNSAxNy41IDVIMTVWM0g5djJINi41Yy0uNjYgMC0xLjIyLjQyLTEuNDIgMS4wMUwzIDEydjhjMCAuNTUuNDUgMSAxIDFoMWMuNTUgMCAxLS40NSAxLTF2LTFoMTJ2MWMwIC41NS40NSAxIDEgMWgxYy41NSAwIDEtLjQ1IDEtMXYtOGwtMi4wOC01Ljk5eicvJTNFJTNDL3N2ZyUzRVwiLFxuICAgIG5hbWU6IFwiVGF4aVwiXG4gIH0sXG4gIGJ1czoge1xuICAgIGljb246IFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCclM0UlM0NwYXRoIGZpbGw9JyUyMzEwYjk4MScgZD0nTTQgMTZjMCAuODguMzkgMS42NyAxIDIuMjJWMjBjMCAuNTUuNDUgMSAxIDFoMWMuNTUgMCAxLS40NSAxLTF2LTFoOHYxYzAgLjU1LjQ1IDEgMSAxaDFjLjU1IDAgMS0uNDUgMS0xdi0xLjc4Yy42MS0uNTUgMS0xLjM0IDEtMi4yMlY2YzAtMy41LTMuNTgtNC04LTRzLTggLjUtOCA0djEweicvJTNFJTNDL3N2ZyUzRVwiLFxuICAgIG5hbWU6IFwiQnVzXCJcbiAgfSxcbiAgdHJhaW46IHtcbiAgICBpY29uOiBcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnJTNFJTNDcGF0aCBmaWxsPSclMjM4YjVjZjYnIGQ9J00xMiAyYy00IDAtOCAuNS04IDR2OS41QzQgMTcuNDMgNS41NyAxOSA3LjUgMTlMNiAyMC41di41aDJsMi0yaDRsMiAyaDJ2LS41TDE2LjUgMTljMS45MyAwIDMuNS0xLjU3IDMuNS0zLjVWNmMwLTMuNS00LTQtOC00eicvJTNFJTNDL3N2ZyUzRVwiLFxuICAgIG5hbWU6IFwiVHJhaW5cIlxuICB9LFxuICB3YWxraW5nOiB7XG4gICAgaWNvbjogXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDI0IDI0JyUzRSUzQ3BhdGggZmlsbD0nJTIzNmI3MjgwJyBkPSdNMTMuNSA1LjVjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyek05LjggOC45TDcgMjNoMi4xbDEuOC04IDIuMSAydjZoMnYtNy41bC0yLjEtMiAuNi0zYzEuMyAxLjUgMy4zIDIuNSA1LjUgMi41di0yYy0xLjkgMC0zLjUtMS00LjMtMi40bC0xLTEuNmMtLjQtLjYtMS0xLTEuNy0xLS4zIDAtLjUuMS0uOC4xTDYgOC4zVjEzaDJWOS42bDEuOC0uNycvJTNFJTNDL3N2ZyUzRVwiLFxuICAgIG5hbWU6IFwiV2Fsa2luZ1wiXG4gIH0sXG4gIGNhcjoge1xuICAgIGljb246IFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCclM0UlM0NwYXRoIGZpbGw9JyUyM2VmNDQ0NCcgZD0nTTE4LjkyIDYuMDFDMTguNzIgNS40MiAxOC4xNiA1IDE3LjUgNUgxNVYzSDl2Mkg2LjVjLS42NiAwLTEuMjIuNDItMS40MiAxLjAxTDMgMTJ2OGMwIC41NS40NSAxIDEgMWgxYy41NSAwIDEtLjQ1IDEtMXYtMWgxMnYxYzAgLjU1LjQ1IDEgMSAxaDFjLjU1IDAgMS0uNDUgMS0xdi04bC0yLjA4LTUuOTl6Jy8lM0UlM0Mvc3ZnJTNFXCIsXG4gICAgbmFtZTogXCJDYXJcIlxuICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNwb3J0YXRpb25JY29uKHR5cGU6IHN0cmluZykge1xuICBjb25zdCBub3JtYWxpemVkVHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTtcbiAgXG4gIGlmIChub3JtYWxpemVkVHlwZS5pbmNsdWRlcygnbWV0cm8nKSB8fCBub3JtYWxpemVkVHlwZS5pbmNsdWRlcygnc3Vid2F5JykpIHtcbiAgICByZXR1cm4gdHJhbnNwb3J0YXRpb25JY29ucy5tZXRybztcbiAgfSBlbHNlIGlmIChub3JtYWxpemVkVHlwZS5pbmNsdWRlcygndGF4aScpIHx8IG5vcm1hbGl6ZWRUeXBlLmluY2x1ZGVzKCdjYWInKSkge1xuICAgIHJldHVybiB0cmFuc3BvcnRhdGlvbkljb25zLnRheGk7XG4gIH0gZWxzZSBpZiAobm9ybWFsaXplZFR5cGUuaW5jbHVkZXMoJ2J1cycpKSB7XG4gICAgcmV0dXJuIHRyYW5zcG9ydGF0aW9uSWNvbnMuYnVzO1xuICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWRUeXBlLmluY2x1ZGVzKCd0cmFpbicpKSB7XG4gICAgcmV0dXJuIHRyYW5zcG9ydGF0aW9uSWNvbnMudHJhaW47XG4gIH0gZWxzZSBpZiAobm9ybWFsaXplZFR5cGUuaW5jbHVkZXMoJ3dhbGsnKSB8fCBub3JtYWxpemVkVHlwZS5pbmNsdWRlcygnZm9vdCcpKSB7XG4gICAgcmV0dXJuIHRyYW5zcG9ydGF0aW9uSWNvbnMud2Fsa2luZztcbiAgfSBlbHNlIGlmIChub3JtYWxpemVkVHlwZS5pbmNsdWRlcygnY2FyJykgfHwgbm9ybWFsaXplZFR5cGUuaW5jbHVkZXMoJ2RyaXZlJykpIHtcbiAgICByZXR1cm4gdHJhbnNwb3J0YXRpb25JY29ucy5jYXI7XG4gIH1cbiAgXG4gIC8vIERlZmF1bHQgdG8gbWV0cm8gaWYgbm8gbWF0Y2hcbiAgcmV0dXJuIHRyYW5zcG9ydGF0aW9uSWNvbnMubWV0cm87XG59ICJdLCJuYW1lcyI6WyJ0cmFuc3BvcnRhdGlvbkljb25zIiwibWV0cm8iLCJpY29uIiwibmFtZSIsInRheGkiLCJidXMiLCJ0cmFpbiIsIndhbGtpbmciLCJjYXIiLCJnZXRUcmFuc3BvcnRhdGlvbkljb24iLCJ0eXBlIiwibm9ybWFsaXplZFR5cGUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/transportation-icons.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/unsplash.ts":
/*!*****************************!*\
  !*** ./src/lib/unsplash.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateESIMLink: () => (/* binding */ generateESIMLink),\n/* harmony export */   generateHotelAffiliateLink: () => (/* binding */ generateHotelAffiliateLink),\n/* harmony export */   getActivityImage: () => (/* binding */ getActivityImage),\n/* harmony export */   getAirportImage: () => (/* binding */ getAirportImage),\n/* harmony export */   getDestinationHeaderImage: () => (/* binding */ getDestinationHeaderImage),\n/* harmony export */   getDestinationImage: () => (/* binding */ getDestinationImage),\n/* harmony export */   getHotelImage: () => (/* binding */ getHotelImage)\n/* harmony export */ });\nconst PEXELS_API_KEY = process.env.PEXELS_API_KEY;\n// Optimized fallback images for better performance\nconst optimizedFallbacks = {\n    destinations: {\n        \"paris\": \"https://images.pexels.com/photos/338515/pexels-photo-338515.jpeg\",\n        \"london\": \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\",\n        \"rome\": \"https://images.pexels.com/photos/1257100/pexels-photo-1257100.jpeg\",\n        \"amsterdam\": \"https://images.pexels.com/photos/3601425/pexels-photo-3601425.jpeg\",\n        \"tokyo\": \"https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg\",\n        \"new york\": \"https://images.pexels.com/photos/290386/pexels-photo-290386.jpeg\",\n        \"barcelona\": \"https://images.pexels.com/photos/1388030/pexels-photo-1388030.jpeg\",\n        \"venice\": \"https://images.pexels.com/photos/3601425/pexels-photo-3601425.jpeg\",\n        \"santorini\": \"https://images.pexels.com/photos/3601425/pexels-photo-3601425.jpeg\",\n        \"dubai\": \"https://images.pexels.com/photos/3601425/pexels-photo-3601425.jpeg\"\n    },\n    airports: {\n        \"cdg\": \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\",\n        \"lhr\": \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\",\n        \"fco\": \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\",\n        \"ams\": \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\",\n        \"nrt\": \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\",\n        \"jfk\": \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\"\n    }\n};\n// Image cache for faster responses\nconst imageCache = new Map();\nasync function fetchPexelsImageOptimized(query, orientation = \"landscape\") {\n    // Check cache first\n    const cacheKey = `${query}-${orientation}`;\n    if (imageCache.has(cacheKey)) {\n        return imageCache.get(cacheKey);\n    }\n    // Try optimized fallbacks first\n    const normalizedQuery = query.toLowerCase();\n    for (const [key, url] of Object.entries(optimizedFallbacks.destinations)){\n        if (normalizedQuery.includes(key)) {\n            imageCache.set(cacheKey, url);\n            return url;\n        }\n    }\n    if (!PEXELS_API_KEY) {\n        const fallback = \"https://images.pexels.com/photos/1502602898657-3e91760cbb34/pexels-photo-1502602898657-3e91760cbb34.jpeg?auto=compress&cs=tinysrgb&w=1200\";\n        imageCache.set(cacheKey, fallback);\n        return fallback;\n    }\n    try {\n        const response = await fetch(`https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=1&orientation=${orientation}`, {\n            headers: {\n                Authorization: PEXELS_API_KEY\n            },\n            // Add timeout for faster fallback\n            signal: AbortSignal.timeout(3000)\n        });\n        if (!response.ok) {\n            throw new Error(\"Pexels API failed\");\n        }\n        const data = await response.json();\n        const imageUrl = data.photos?.[0]?.src?.large || \"https://images.pexels.com/photos/1502602898657-3e91760cbb34/pexels-photo-1502602898657-3e91760cbb34.jpeg?auto=compress&cs=tinysrgb&w=1200\";\n        imageCache.set(cacheKey, imageUrl);\n        return imageUrl;\n    } catch (e) {\n        const fallback = \"https://images.pexels.com/photos/1502602898657-3e91760cbb34/pexels-photo-1502602898657-3e91760cbb34.jpeg?auto=compress&cs=tinysrgb&w=1200\";\n        imageCache.set(cacheKey, fallback);\n        return fallback;\n    }\n}\nasync function getDestinationImage(query, orientation = \"landscape\") {\n    return await fetchPexelsImageOptimized(query, orientation);\n}\nasync function getAirportImage(airportName) {\n    // Check airport-specific fallbacks first\n    const normalizedAirport = airportName.toLowerCase();\n    for (const [code, url] of Object.entries(optimizedFallbacks.airports)){\n        if (normalizedAirport.includes(code)) {\n            return url;\n        }\n    }\n    // Try optimized queries for better airport photos\n    const queries = [\n        `${airportName} airport terminal`,\n        `${airportName} airport building`,\n        `${airportName} airport`\n    ];\n    for (const query of queries){\n        const image = await fetchPexelsImageOptimized(query, \"landscape\");\n        if (image !== \"https://images.pexels.com/photos/1502602898657-3e91760cbb34/pexels-photo-1502602898657-3e91760cbb34.jpeg?auto=compress&cs=tinysrgb&w=1200\") {\n            return image;\n        }\n    }\n    return \"https://images.pexels.com/photos/460672/pexels-photo-460672.jpeg\";\n}\nasync function getHotelImage(hotelName) {\n    // Try optimized queries for better hotel photos\n    const queries = [\n        `${hotelName} hotel exterior`,\n        `${hotelName} hotel building`,\n        `${hotelName} hotel`\n    ];\n    for (const query of queries){\n        const image = await fetchPexelsImageOptimized(query, \"landscape\");\n        if (image !== \"https://images.pexels.com/photos/1502602898657-3e91760cbb34/pexels-photo-1502602898657-3e91760cbb34.jpeg?auto=compress&cs=tinysrgb&w=1200\") {\n            return image;\n        }\n    }\n    return \"https://images.pexels.com/photos/261102/pexels-photo-261102.jpeg\";\n}\nasync function getActivityImage(activityName) {\n    return await fetchPexelsImageOptimized(activityName, \"landscape\");\n}\nasync function getDestinationHeaderImage(destination) {\n    return await fetchPexelsImageOptimized(destination, \"landscape\");\n}\n// Generate affiliate links for hotels\nfunction generateHotelAffiliateLink(hotelName, destination) {\n    const searchQuery = encodeURIComponent(`${hotelName} ${destination}`);\n    return `https://www.booking.com/searchresults.html?ss=${searchQuery}&aid=1234567&label=neyala-ai`;\n}\n// Generate eSIM affiliate links\nfunction generateESIMLink(destination) {\n    const country = destination.split(\",\")[1]?.trim() || destination;\n    return `https://www.airalo.com/global-esim?ref=neyala-ai&country=${encodeURIComponent(country)}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEwQkMsT0FBTztRQUNyRCxJQUFJcUMsVUFBVSw2SUFBNkk7WUFDekosT0FBT0E7UUFDVDtJQUNGO0lBRUEsT0FBTztBQUNUO0FBRU8sZUFBZUMsY0FBY0MsU0FBaUI7SUFDbkQsZ0RBQWdEO0lBQ2hELE1BQU1ILFVBQVU7UUFDZCxDQUFDLEVBQUVHLFVBQVUsZUFBZSxDQUFDO1FBQzdCLENBQUMsRUFBRUEsVUFBVSxlQUFlLENBQUM7UUFDN0IsQ0FBQyxFQUFFQSxVQUFVLE1BQU0sQ0FBQztLQUNyQjtJQUVELEtBQUssTUFBTXZDLFNBQVNvQyxRQUFTO1FBQzNCLE1BQU1DLFFBQVEsTUFBTXRDLDBCQUEwQkMsT0FBTztRQUNyRCxJQUFJcUMsVUFBVSw2SUFBNkk7WUFDekosT0FBT0E7UUFDVDtJQUNGO0lBRUEsT0FBTztBQUNUO0FBRU8sZUFBZUcsaUJBQWlCQyxZQUFvQjtJQUN6RCxPQUFPLE1BQU0xQywwQkFBMEIwQyxjQUFjO0FBQ3ZEO0FBRU8sZUFBZUMsMEJBQTBCQyxXQUFtQjtJQUNqRSxPQUFPLE1BQU01QywwQkFBMEI0QyxhQUFhO0FBQ3REO0FBRUEsc0NBQXNDO0FBQy9CLFNBQVNDLDJCQUEyQkwsU0FBaUIsRUFBRUksV0FBbUI7SUFDL0UsTUFBTUUsY0FBYzdCLG1CQUFtQixDQUFDLEVBQUV1QixVQUFVLENBQUMsRUFBRUksWUFBWSxDQUFDO0lBQ3BFLE9BQU8sQ0FBQyw4Q0FBOEMsRUFBRUUsWUFBWSw0QkFBNEIsQ0FBQztBQUNuRztBQUVBLGdDQUFnQztBQUN6QixTQUFTQyxpQkFBaUJILFdBQW1CO0lBQ2xELE1BQU1JLFVBQVVKLFlBQVlLLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFQyxVQUFVTjtJQUNyRCxPQUFPLENBQUMseURBQXlELEVBQUUzQixtQkFBbUIrQixTQUFTLENBQUM7QUFDbEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXlhbGEtYWkvLi9zcmMvbGliL3Vuc3BsYXNoLnRzPzBiMTEiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUEVYRUxTX0FQSV9LRVkgPSBwcm9jZXNzLmVudi5QRVhFTFNfQVBJX0tFWTtcblxuLy8gT3B0aW1pemVkIGZhbGxiYWNrIGltYWdlcyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG5jb25zdCBvcHRpbWl6ZWRGYWxsYmFja3MgPSB7XG4gIGRlc3RpbmF0aW9uczoge1xuICAgICdwYXJpcyc6ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy8zMzg1MTUvcGV4ZWxzLXBob3RvLTMzODUxNS5qcGVnJyxcbiAgICAnbG9uZG9uJzogJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzQ2MDY3Mi9wZXhlbHMtcGhvdG8tNDYwNjcyLmpwZWcnLFxuICAgICdyb21lJzogJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzEyNTcxMDAvcGV4ZWxzLXBob3RvLTEyNTcxMDAuanBlZycsXG4gICAgJ2Ftc3RlcmRhbSc6ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy8zNjAxNDI1L3BleGVscy1waG90by0zNjAxNDI1LmpwZWcnLFxuICAgICd0b2t5byc6ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy8yNTA2OTIzL3BleGVscy1waG90by0yNTA2OTIzLmpwZWcnLFxuICAgICduZXcgeW9yayc6ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy8yOTAzODYvcGV4ZWxzLXBob3RvLTI5MDM4Ni5qcGVnJyxcbiAgICAnYmFyY2Vsb25hJzogJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzEzODgwMzAvcGV4ZWxzLXBob3RvLTEzODgwMzAuanBlZycsXG4gICAgJ3ZlbmljZSc6ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy8zNjAxNDI1L3BleGVscy1waG90by0zNjAxNDI1LmpwZWcnLFxuICAgICdzYW50b3JpbmknOiAnaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvMzYwMTQyNS9wZXhlbHMtcGhvdG8tMzYwMTQyNS5qcGVnJyxcbiAgICAnZHViYWknOiAnaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvMzYwMTQyNS9wZXhlbHMtcGhvdG8tMzYwMTQyNS5qcGVnJ1xuICB9LFxuICBhaXJwb3J0czoge1xuICAgICdjZGcnOiAnaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvNDYwNjcyL3BleGVscy1waG90by00NjA2NzIuanBlZycsXG4gICAgJ2xocic6ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy80NjA2NzIvcGV4ZWxzLXBob3RvLTQ2MDY3Mi5qcGVnJyxcbiAgICAnZmNvJzogJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzQ2MDY3Mi9wZXhlbHMtcGhvdG8tNDYwNjcyLmpwZWcnLFxuICAgICdhbXMnOiAnaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvNDYwNjcyL3BleGVscy1waG90by00NjA2NzIuanBlZycsXG4gICAgJ25ydCc6ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy80NjA2NzIvcGV4ZWxzLXBob3RvLTQ2MDY3Mi5qcGVnJyxcbiAgICAnamZrJzogJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzQ2MDY3Mi9wZXhlbHMtcGhvdG8tNDYwNjcyLmpwZWcnXG4gIH1cbn07XG5cbi8vIEltYWdlIGNhY2hlIGZvciBmYXN0ZXIgcmVzcG9uc2VzXG5jb25zdCBpbWFnZUNhY2hlID0gbmV3IE1hcCgpO1xuXG5hc3luYyBmdW5jdGlvbiBmZXRjaFBleGVsc0ltYWdlT3B0aW1pemVkKHF1ZXJ5OiBzdHJpbmcsIG9yaWVudGF0aW9uOiAnbGFuZHNjYXBlJyB8ICdwb3J0cmFpdCcgPSAnbGFuZHNjYXBlJyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gIGNvbnN0IGNhY2hlS2V5ID0gYCR7cXVlcnl9LSR7b3JpZW50YXRpb259YDtcbiAgaWYgKGltYWdlQ2FjaGUuaGFzKGNhY2hlS2V5KSkge1xuICAgIHJldHVybiBpbWFnZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIH1cblxuICAvLyBUcnkgb3B0aW1pemVkIGZhbGxiYWNrcyBmaXJzdFxuICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICBmb3IgKGNvbnN0IFtrZXksIHVybF0gb2YgT2JqZWN0LmVudHJpZXMob3B0aW1pemVkRmFsbGJhY2tzLmRlc3RpbmF0aW9ucykpIHtcbiAgICBpZiAobm9ybWFsaXplZFF1ZXJ5LmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIGltYWdlQ2FjaGUuc2V0KGNhY2hlS2V5LCB1cmwpO1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG4gIH1cblxuICBpZiAoIVBFWEVMU19BUElfS0VZKSB7XG4gICAgY29uc3QgZmFsbGJhY2sgPSAnaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvMTUwMjYwMjg5ODY1Ny0zZTkxNzYwY2JiMzQvcGV4ZWxzLXBob3RvLTE1MDI2MDI4OTg2NTctM2U5MTc2MGNiYjM0LmpwZWc/YXV0bz1jb21wcmVzcyZjcz10aW55c3JnYiZ3PTEyMDAnO1xuICAgIGltYWdlQ2FjaGUuc2V0KGNhY2hlS2V5LCBmYWxsYmFjayk7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vYXBpLnBleGVscy5jb20vdjEvc2VhcmNoP3F1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KX0mcGVyX3BhZ2U9MSZvcmllbnRhdGlvbj0ke29yaWVudGF0aW9ufWAsXG4gICAgICB7IFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IFBFWEVMU19BUElfS0VZIH0sXG4gICAgICAgIC8vIEFkZCB0aW1lb3V0IGZvciBmYXN0ZXIgZmFsbGJhY2tcbiAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDMwMDApXG4gICAgICB9XG4gICAgKTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BleGVscyBBUEkgZmFpbGVkJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgaW1hZ2VVcmwgPSBkYXRhLnBob3Rvcz8uWzBdPy5zcmM/LmxhcmdlIHx8ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy8xNTAyNjAyODk4NjU3LTNlOTE3NjBjYmIzNC9wZXhlbHMtcGhvdG8tMTUwMjYwMjg5ODY1Ny0zZTkxNzYwY2JiMzQuanBlZz9hdXRvPWNvbXByZXNzJmNzPXRpbnlzcmdiJnc9MTIwMCc7XG4gICAgXG4gICAgaW1hZ2VDYWNoZS5zZXQoY2FjaGVLZXksIGltYWdlVXJsKTtcbiAgICByZXR1cm4gaW1hZ2VVcmw7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zdCBmYWxsYmFjayA9ICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy8xNTAyNjAyODk4NjU3LTNlOTE3NjBjYmIzNC9wZXhlbHMtcGhvdG8tMTUwMjYwMjg5ODY1Ny0zZTkxNzYwY2JiMzQuanBlZz9hdXRvPWNvbXByZXNzJmNzPXRpbnlzcmdiJnc9MTIwMCc7XG4gICAgaW1hZ2VDYWNoZS5zZXQoY2FjaGVLZXksIGZhbGxiYWNrKTtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERlc3RpbmF0aW9uSW1hZ2UocXVlcnk6IHN0cmluZywgb3JpZW50YXRpb246ICdsYW5kc2NhcGUnIHwgJ3BvcnRyYWl0JyA9ICdsYW5kc2NhcGUnKSB7XG4gIHJldHVybiBhd2FpdCBmZXRjaFBleGVsc0ltYWdlT3B0aW1pemVkKHF1ZXJ5LCBvcmllbnRhdGlvbik7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBaXJwb3J0SW1hZ2UoYWlycG9ydE5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIENoZWNrIGFpcnBvcnQtc3BlY2lmaWMgZmFsbGJhY2tzIGZpcnN0XG4gIGNvbnN0IG5vcm1hbGl6ZWRBaXJwb3J0ID0gYWlycG9ydE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgZm9yIChjb25zdCBbY29kZSwgdXJsXSBvZiBPYmplY3QuZW50cmllcyhvcHRpbWl6ZWRGYWxsYmFja3MuYWlycG9ydHMpKSB7XG4gICAgaWYgKG5vcm1hbGl6ZWRBaXJwb3J0LmluY2x1ZGVzKGNvZGUpKSB7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRyeSBvcHRpbWl6ZWQgcXVlcmllcyBmb3IgYmV0dGVyIGFpcnBvcnQgcGhvdG9zXG4gIGNvbnN0IHF1ZXJpZXMgPSBbXG4gICAgYCR7YWlycG9ydE5hbWV9IGFpcnBvcnQgdGVybWluYWxgLFxuICAgIGAke2FpcnBvcnROYW1lfSBhaXJwb3J0IGJ1aWxkaW5nYCxcbiAgICBgJHthaXJwb3J0TmFtZX0gYWlycG9ydGBcbiAgXTtcbiAgXG4gIGZvciAoY29uc3QgcXVlcnkgb2YgcXVlcmllcykge1xuICAgIGNvbnN0IGltYWdlID0gYXdhaXQgZmV0Y2hQZXhlbHNJbWFnZU9wdGltaXplZChxdWVyeSwgJ2xhbmRzY2FwZScpO1xuICAgIGlmIChpbWFnZSAhPT0gJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzE1MDI2MDI4OTg2NTctM2U5MTc2MGNiYjM0L3BleGVscy1waG90by0xNTAyNjAyODk4NjU3LTNlOTE3NjBjYmIzNC5qcGVnP2F1dG89Y29tcHJlc3MmY3M9dGlueXNyZ2Imdz0xMjAwJykge1xuICAgICAgcmV0dXJuIGltYWdlO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuICdodHRwczovL2ltYWdlcy5wZXhlbHMuY29tL3Bob3Rvcy80NjA2NzIvcGV4ZWxzLXBob3RvLTQ2MDY3Mi5qcGVnJztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEhvdGVsSW1hZ2UoaG90ZWxOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAvLyBUcnkgb3B0aW1pemVkIHF1ZXJpZXMgZm9yIGJldHRlciBob3RlbCBwaG90b3NcbiAgY29uc3QgcXVlcmllcyA9IFtcbiAgICBgJHtob3RlbE5hbWV9IGhvdGVsIGV4dGVyaW9yYCxcbiAgICBgJHtob3RlbE5hbWV9IGhvdGVsIGJ1aWxkaW5nYCxcbiAgICBgJHtob3RlbE5hbWV9IGhvdGVsYFxuICBdO1xuICBcbiAgZm9yIChjb25zdCBxdWVyeSBvZiBxdWVyaWVzKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBhd2FpdCBmZXRjaFBleGVsc0ltYWdlT3B0aW1pemVkKHF1ZXJ5LCAnbGFuZHNjYXBlJyk7XG4gICAgaWYgKGltYWdlICE9PSAnaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvMTUwMjYwMjg5ODY1Ny0zZTkxNzYwY2JiMzQvcGV4ZWxzLXBob3RvLTE1MDI2MDI4OTg2NTctM2U5MTc2MGNiYjM0LmpwZWc/YXV0bz1jb21wcmVzcyZjcz10aW55c3JnYiZ3PTEyMDAnKSB7XG4gICAgICByZXR1cm4gaW1hZ2U7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzI2MTEwMi9wZXhlbHMtcGhvdG8tMjYxMTAyLmpwZWcnO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZpdHlJbWFnZShhY3Rpdml0eU5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBhd2FpdCBmZXRjaFBleGVsc0ltYWdlT3B0aW1pemVkKGFjdGl2aXR5TmFtZSwgJ2xhbmRzY2FwZScpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGVzdGluYXRpb25IZWFkZXJJbWFnZShkZXN0aW5hdGlvbjogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIGF3YWl0IGZldGNoUGV4ZWxzSW1hZ2VPcHRpbWl6ZWQoZGVzdGluYXRpb24sICdsYW5kc2NhcGUnKTtcbn1cblxuLy8gR2VuZXJhdGUgYWZmaWxpYXRlIGxpbmtzIGZvciBob3RlbHNcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUhvdGVsQWZmaWxpYXRlTGluayhob3RlbE5hbWU6IHN0cmluZywgZGVzdGluYXRpb246IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGAke2hvdGVsTmFtZX0gJHtkZXN0aW5hdGlvbn1gKTtcbiAgcmV0dXJuIGBodHRwczovL3d3dy5ib29raW5nLmNvbS9zZWFyY2hyZXN1bHRzLmh0bWw/c3M9JHtzZWFyY2hRdWVyeX0mYWlkPTEyMzQ1NjcmbGFiZWw9bmV5YWxhLWFpYDtcbn1cblxuLy8gR2VuZXJhdGUgZVNJTSBhZmZpbGlhdGUgbGlua3NcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUVTSU1MaW5rKGRlc3RpbmF0aW9uOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBjb3VudHJ5ID0gZGVzdGluYXRpb24uc3BsaXQoJywnKVsxXT8udHJpbSgpIHx8IGRlc3RpbmF0aW9uO1xuICByZXR1cm4gYGh0dHBzOi8vd3d3LmFpcmFsby5jb20vZ2xvYmFsLWVzaW0/cmVmPW5leWFsYS1haSZjb3VudHJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNvdW50cnkpfWA7XG59ICJdLCJuYW1lcyI6WyJQRVhFTFNfQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJvcHRpbWl6ZWRGYWxsYmFja3MiLCJkZXN0aW5hdGlvbnMiLCJhaXJwb3J0cyIsImltYWdlQ2FjaGUiLCJNYXAiLCJmZXRjaFBleGVsc0ltYWdlT3B0aW1pemVkIiwicXVlcnkiLCJvcmllbnRhdGlvbiIsImNhY2hlS2V5IiwiaGFzIiwiZ2V0Iiwibm9ybWFsaXplZFF1ZXJ5IiwidG9Mb3dlckNhc2UiLCJrZXkiLCJ1cmwiLCJPYmplY3QiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJzZXQiLCJmYWxsYmFjayIsInJlc3BvbnNlIiwiZmV0Y2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidGltZW91dCIsIm9rIiwiRXJyb3IiLCJkYXRhIiwianNvbiIsImltYWdlVXJsIiwicGhvdG9zIiwic3JjIiwibGFyZ2UiLCJlIiwiZ2V0RGVzdGluYXRpb25JbWFnZSIsImdldEFpcnBvcnRJbWFnZSIsImFpcnBvcnROYW1lIiwibm9ybWFsaXplZEFpcnBvcnQiLCJjb2RlIiwicXVlcmllcyIsImltYWdlIiwiZ2V0SG90ZWxJbWFnZSIsImhvdGVsTmFtZSIsImdldEFjdGl2aXR5SW1hZ2UiLCJhY3Rpdml0eU5hbWUiLCJnZXREZXN0aW5hdGlvbkhlYWRlckltYWdlIiwiZGVzdGluYXRpb24iLCJnZW5lcmF0ZUhvdGVsQWZmaWxpYXRlTGluayIsInNlYXJjaFF1ZXJ5IiwiZ2VuZXJhdGVFU0lNTGluayIsImNvdW50cnkiLCJzcGxpdCIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/unsplash.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/node-fetch-native","vendor-chunks/@clerk","vendor-chunks/@peculiar","vendor-chunks/asn1js","vendor-chunks/webcrypto-core","vendor-chunks/tslib","vendor-chunks/path-to-regexp","vendor-chunks/pvtsutils","vendor-chunks/pvutils","vendor-chunks/cookie","vendor-chunks/deepmerge","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/formdata-node","vendor-chunks/axios","vendor-chunks/groq-sdk","vendor-chunks/form-data-encoder","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/whatwg-url","vendor-chunks/call-bind-apply-helpers","vendor-chunks/agentkeepalive","vendor-chunks/get-proto","vendor-chunks/tr46","vendor-chunks/mime-db","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/follow-redirects","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/humanize-ms","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/get-intrinsic","vendor-chunks/event-target-shim","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-itinerary-stream%2Froute&page=%2Fapi%2Fgenerate-itinerary-stream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-itinerary-stream%2Froute.ts&appDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fambal%2FDesktop%2Ftrv%2Fcode%2FneyalaAI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();